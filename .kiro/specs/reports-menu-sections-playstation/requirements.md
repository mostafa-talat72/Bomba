# Requirements Document

## Introduction

تحسين صفحة التقارير لتتعامل مع أقسام المنيو (Menu Sections) بشكل منفصل وإضافة تحليل مفصل لجلسات البلايستيشن والكمبيوتر. حالياً، التقارير تعرض المنتجات الأكثر مبيعاً بدون تصنيف حسب الأقسام، ولا تعرض تفاصيل كافية عن جلسات الألعاب.

## Glossary

- **System**: نظام Bomba لإدارة المقاهي والمطاعم وصالات الألعاب
- **Menu Section**: قسم من أقسام المنيو (مثل: مشروبات ساخنة، مشروبات باردة، مأكولات، إلخ)
- **Sales Report**: تقرير المبيعات الذي يعرض إحصائيات المنتجات المباعة
- **Sessions Report**: تقرير الجلسات الذي يعرض إحصائيات جلسات البلايستيشن والكمبيوتر
- **Revenue Breakdown**: توزيع الإيرادات حسب المصدر (كافيه، بلايستيشن، كمبيوتر)
- **Top Products**: المنتجات الأكثر مبيعاً
- **Device Usage**: معدل استخدام الأجهزة (بلايستيشن/كمبيوتر)

## Requirements

### Requirement 1

**User Story:** كمدير للمنشأة، أريد أن أرى المنتجات الأكثر مبيعاً مصنفة حسب أقسام المنيو، حتى أتمكن من فهم أداء كل قسم على حدة.

#### Acceptance Criteria

1. WHEN المستخدم يفتح صفحة التقارير، THE System SHALL يعرض قسم "أكثر المنتجات مبيعاً" مقسم حسب أقسام المنيو
2. THE System SHALL يعرض لكل قسم منيو قائمة بأكثر 5 منتجات مبيعاً في هذا القسم
3. THE System SHALL يعرض لكل منتج: الاسم، الكمية المباعة، والإيراد الإجمالي
4. THE System SHALL يسمح بطي وفتح كل قسم منيو لتحسين قابلية القراءة
5. WHEN لا توجد مبيعات في قسم معين، THE System SHALL يعرض رسالة "لا توجد مبيعات في هذا القسم"

### Requirement 2

**User Story:** كمدير للمنشأة، أريد أن أرى إحصائيات مفصلة عن جلسات البلايستيشن والكمبيوتر بشكل منفصل، حتى أتمكن من تحليل أداء كل نوع من الأجهزة.

#### Acceptance Criteria

1. THE System SHALL يعرض قسم "تحليل جلسات البلايستيشن" منفصل عن "تحليل جلسات الكمبيوتر"
2. THE System SHALL يعرض لكل نوع جهاز: عدد الجلسات، متوسط المدة، الإيراد الإجمالي
3. THE System SHALL يعرض قائمة بأكثر الأجهزة استخداماً لكل نوع (مثل: PS4-1, PS4-2, PC-1)
4. THE System SHALL يعرض معدل الاستخدام لكل جهاز (نسبة الوقت المستخدم من الوقت المتاح)
5. THE System SHALL يعرض توزيع الجلسات حسب عدد الدراعات للبلايستيشن (1-2، 3، 4 دراعات)

### Requirement 3

**User Story:** كمدير للمنشأة، أريد أن أرى توزيع الإيرادات بشكل أكثر تفصيلاً، حتى أتمكن من فهم مصادر الدخل بدقة.

#### Acceptance Criteria

1. THE System SHALL يعرض بطاقات منفصلة لإيرادات: الكافيه، البلايستيشن، والكمبيوتر
2. THE System SHALL يعرض لكل مصدر: المبلغ الإجمالي والنسبة المئوية من الإيراد الكلي
3. THE System SHALL يستخدم ألوان مميزة لكل مصدر (أخضر للكافيه، أزرق للبلايستيشن، برتقالي للكمبيوتر)
4. THE System SHALL يعرض رسم بياني دائري (Pie Chart) لتوزيع الإيرادات
5. THE System SHALL يحدث البيانات تلقائياً عند تغيير الفترة الزمنية

### Requirement 4

**User Story:** كمدير للمنشأة، أريد أن أتمكن من تصدير التقارير المفصلة، حتى أتمكن من مشاركتها أو حفظها للرجوع إليها لاحقاً.

#### Acceptance Criteria

1. THE System SHALL يوفر زر "تصدير Excel" لكل قسم من أقسام التقرير
2. THE System SHALL يوفر زر "تصدير PDF" لكل قسم من أقسام التقرير
3. WHEN المستخدم ينقر على "تصدير Excel"، THE System SHALL يصدر ملف Excel يحتوي على جميع البيانات المعروضة
4. WHEN المستخدم ينقر على "تصدير PDF"، THE System SHALL يصدر ملف PDF منسق بشكل احترافي
5. THE System SHALL يتضمن في الملف المصدر: الفترة الزمنية، تاريخ التصدير، واسم المنشأة

### Requirement 5

**User Story:** كمدير للمنشأة، أريد أن أرى مقارنة بين أداء الفترة الحالية والفترة السابقة، حتى أتمكن من تتبع النمو أو الانخفاض.

#### Acceptance Criteria

1. THE System SHALL يعرض نسبة التغيير (زيادة/نقصان) مقارنة بالفترة السابقة لكل مؤشر رئيسي
2. THE System SHALL يستخدم أيقونة سهم لأعلى (↑) للزيادة وسهم لأسفل (↓) للنقصان
3. THE System SHALL يستخدم اللون الأخضر للزيادة والأحمر للنقصان
4. WHEN لا توجد بيانات للفترة السابقة، THE System SHALL يعرض "لا توجد بيانات للمقارنة"
5. THE System SHALL يحسب الفترة السابقة تلقائياً بناءً على الفترة المختارة (مثل: إذا اختار اليوم، يقارن بالأمس)

### Requirement 6

**User Story:** كمدير للمنشأة، أريد أن أرى تحليل ساعات الذروة، حتى أتمكن من تخطيط الموارد بشكل أفضل.

#### Acceptance Criteria

1. THE System SHALL يعرض قسم "ساعات الذروة" يوضح أكثر الساعات ازدحاماً
2. THE System SHALL يعرض رسم بياني شريطي لتوزيع المبيعات/الجلسات حسب الساعة
3. THE System SHALL يميز ساعات الذروة (أعلى 3 ساعات) بلون مختلف
4. THE System SHALL يعرض متوسط الإيراد لكل ساعة
5. THE System SHALL يسمح بالتبديل بين عرض المبيعات والجلسات

### Requirement 7

**User Story:** كمدير للمنشأة، أريد أن أرى تحليل أداء الموظفين، حتى أتمكن من تقييم الأداء وتحفيز الموظفين.

#### Acceptance Criteria

1. THE System SHALL يعرض قسم "أداء الموظفين" يوضح إحصائيات كل موظف
2. THE System SHALL يعرض لكل موظف: عدد الطلبات، عدد الجلسات، الإيراد الإجمالي
3. THE System SHALL يرتب الموظفين حسب الإيراد الإجمالي (الأعلى أولاً)
4. THE System SHALL يعرض متوسط قيمة الطلب لكل موظف
5. WHEN الموظف ليس لديه أي نشاط في الفترة المحددة، THE System SHALL لا يعرضه في القائمة

### Requirement 8

**User Story:** كمدير للمنشأة، أريد أن أتمكن من تحديد الساعة بالإضافة إلى التاريخ عند فلترة التقارير، حتى أتمكن من الحصول على تقارير دقيقة لفترات زمنية محددة بالساعة.

#### Acceptance Criteria

1. THE System SHALL يعرض حقل منفصل لاختيار تاريخ البداية وحقل منفصل لاختيار ساعة البداية
2. THE System SHALL يعرض حقل منفصل لاختيار تاريخ النهاية وحقل منفصل لاختيار ساعة النهاية
3. THE System SHALL يستخدم مكون TimePicker لاختيار الساعة بفواصل 15 دقيقة
4. THE System SHALL يعرض ملخص للفترة المحددة يوضح التاريخ والساعة بتنسيق واضح (مثل: "الأحد، 15 يناير 2024 عند 02:30 م")
5. THE System SHALL يحفظ الساعة المحددة عند تطبيق الفلتر ويستخدمها في جلب البيانات
6. THE System SHALL يسمح بتحديد ساعات مختلفة لنفس اليوم (مثل: من 10:00 ص إلى 05:00 م)
7. WHEN المستخدم يغير التاريخ، THE System SHALL يحتفظ بالساعة المحددة مسبقاً
8. WHEN المستخدم يغير الساعة، THE System SHALL يحدث الفلتر تلقائياً ويعيد جلب البيانات
