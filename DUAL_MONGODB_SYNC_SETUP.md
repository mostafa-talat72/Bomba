# Dual MongoDB Sync - Setup Guide

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ูุฒุงููุฉ ูุฒุฏูุฌ ูู MongoDB ูุณูุญ ููุชุทุจูู ุจุงูุนูู ุนูู MongoDB ูุญูู ููุณุฑุนุฉ ูุน ูุฒุงููุฉ ุชููุงุฆูุฉ ุฅูู MongoDB Atlas ููุณุฎุฉ ุงุญุชูุงุทูุฉ ุณุญุงุจูุฉ.

## ุงููููุฒุงุช

โ **ุณุฑุนุฉ ุนุงููุฉ**: ุฌููุน ุงูุนูููุงุช ุชุชู ุนูู MongoDB ูุญูู
โ **ูุณุฎ ุงุญุชูุงุทู ุชููุงุฆู**: ูุฒุงููุฉ ุชููุงุฆูุฉ ูุฌููุน ุงูุชุบููุฑุงุช ุฅูู Atlas
โ **ูุฒุงููุฉ ุบูุฑ ูุชุฒุงููุฉ**: ูุง ุชุคุซุฑ ุนูู ุฃุฏุงุก ุงูุนูููุงุช ุงููุญููุฉ
โ **ูุฑููุฉ ุนุงููุฉ**: ูุนูู ุญุชู ูู ุงููุทุน ุงูุงุชุตุงู ุจู Atlas
โ **ุดูุงููุฉ ูุงููุฉ**: ูุง ูุญุชุงุฌ ุชุนุฏูู ุงูููุฏ ุงูุญุงูู

## ูุชุทูุจุงุช ุงูุชุดุบูู

### 1. MongoDB ูุญูู

ูุฌุจ ุชุซุจูุช ูุชุดุบูู MongoDB ุนูู ุงูุฌูุงุฒ ุงููุญูู:

**Windows:**
```bash
# ุชุญููู MongoDB Community Server ูู:
https://www.mongodb.com/try/download/community

# ุฃู ุงุณุชุฎุฏุงู Chocolatey:
choco install mongodb

# ุชุดุบูู MongoDB:
mongod
```

**Docker:**
```bash
docker run -d -p 27017:27017 --name mongodb mongo
```

### 2. MongoDB Atlas

ูุฌุจ ุฃู ูููู ูุฏูู ุญุณุงุจ ุนูู MongoDB Atlas:
1. ุงุฐูุจ ุฅูู https://cloud.mongodb.com/
2. ุฃูุดุฆ cluster ุฃู ุงุณุชุฎุฏู ููุฌูุฏ
3. ุฃุถู IP ุงูุฎุงุต ุจู ูู Network Access (ุฃู 0.0.0.0/0 ููุชุทููุฑ)
4. ุงุญุตู ุนูู connection string

## ุงูุฅุนุฏุงุฏ

### ุงูุฎุทูุฉ 1: ุชุญุฏูุซ ููู .env

ุชู ุฅุถุงูุฉ ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ุฅูู `server/.env`:

```env
# Database Configuration
MONGODB_LOCAL_URI=mongodb://localhost:27017/bomba
MONGODB_ATLAS_URI=mongodb+srv://username:password@cluster.mongodb.net/bomba

# Sync Configuration
SYNC_ENABLED=true
SYNC_QUEUE_MAX_SIZE=10000
SYNC_WORKER_INTERVAL=100
SYNC_MAX_RETRIES=5
SYNC_PERSIST_QUEUE=true
```

### ุงูุฎุทูุฉ 2: ุชุซุจูุช ุงูุญุฒู

ุชู ุชุซุจูุช ุงูุญุฒู ุงููุทููุจุฉ:
- โ `uuid@13.0.0` - ูุฅูุดุงุก ูุนุฑูุงุช ูุฑูุฏุฉ ููุนูููุงุช
- โ `fast-check@4.3.0` - ููุงุฎุชุจุงุฑุงุช ุงููุงุฆูุฉ ุนูู ุงูุฎุตุงุฆุต

### ุงูุฎุทูุฉ 3: ูููู ุงููุฌูุฏุงุช

ุชู ุฅูุดุงุก ุงููููู ุงูุชุงูู:

```
server/
โโโ config/
โ   โโโ syncConfig.js          # ุฅุนุฏุงุฏุงุช ุงููุฒุงููุฉ
โโโ services/
โ   โโโ sync/                  # ุฎุฏูุงุช ุงููุฒุงููุฉ
โ       โโโ README.md
โโโ middleware/
โ   โโโ sync/                  # Middleware ูููุฒุงููุฉ
โโโ data/                      # ูุฌูุฏ ูุญูุธ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ
โโโ .env.example              # ูุซุงู ููุฅุนุฏุงุฏุงุช
```

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุชุดุบูู ุงููุธุงู

1. **ุชุฃูุฏ ูู ุชุดุบูู MongoDB ุงููุญูู:**
```bash
mongod
```

2. **ุดุบู ุงูุชุทุจูู:**
```bash
npm run dev
```

3. **ุชุญูู ูู ุงูุงุชุตุงู:**
ุณูุธูุฑ ูู ุงูููุฌ:
```
โ MongoDB Connected Successfully! (Local)
โ MongoDB Atlas Connected Successfully! (Backup)
๐ Sync system initialized
```

### ุชุนุทูู ุงููุฒุงููุฉ

ุฅุฐุง ุฃุฑุฏุช ุชุนุทูู ุงููุฒุงููุฉ ูุคูุชุงู:

```env
SYNC_ENABLED=false
```

ุณูุนูู ุงูุชุทุจูู ุนูู MongoDB ุงููุญูู ููุท.

## ุงููุฑุงูุจุฉ

### API Endpoints (ุณูุชู ุฅุถุงูุชูุง ูู ุงูููุงู ุงููุงุฏูุฉ)

```bash
# ุญุงูุฉ ุงููุฒุงููุฉ
GET /api/sync/health

# ุฅุญุตุงุฆูุงุช ุงููุฒุงููุฉ
GET /api/sync/metrics

# ูุฒุงููุฉ ูุฏููุฉ ูุงููุฉ
POST /api/sync/full
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุชุทุจูู ูุง ูุจุฏุฃ

**ุงูุญู:**
- ุชุฃูุฏ ูู ุชุดุบูู MongoDB ุงููุญูู
- ุชุญูู ูู `MONGODB_LOCAL_URI` ูู .env

### ุงููุดููุฉ: ุงููุฒุงููุฉ ูุง ุชุนูู

**ุงูุญู:**
- ุชุญูู ูู `SYNC_ENABLED=true`
- ุชุญูู ูู ุตุญุฉ `MONGODB_ATLAS_URI`
- ุชุญูู ูู ุฅุถุงูุฉ IP ูู Atlas Network Access

### ุงููุดููุฉ: ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุชูุจุฑ

**ุงูุญู:**
- ุชุญูู ูู ุงุชุตุงู Atlas
- ุฑุงุฌุน ุงูููุฌุงุช ููุฃุฎุทุงุก
- ูุฏ ุชุญุชุงุฌ ูุฒูุงุฏุฉ `SYNC_WORKER_INTERVAL`

## ุงูุฎุทูุงุช ุงููุงุฏูุฉ

ุงูููุงู ุงููุชุจููุฉ ููุชูููุฐ:
1. โ ุฅุนุฏุงุฏ ุงููุดุฑูุน ูุงูุฅุนุฏุงุฏุงุช
2. โณ ุชุทุจูู DualDatabaseManager
3. โณ ุชุทุจูู SyncQueueManager
4. โณ ุชุทุจูู SyncWorker
5. โณ ุชุทุจูู Mongoose Middleware
6. โณ ุชุทุจูู SyncMonitor
7. โณ ุชุทุจูู FullSyncService
8. โณ ุฅุถุงูุฉ API Endpoints
9. โณ ุงูุชูุงูู ูุน server.js

## ุงูุฃูุงู

- โ ุจูุงูุงุช ุงูุงุนุชูุงุฏ ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ููุท
- โ ูุง ุชูุฌุฏ ุจูุงูุงุช ุญุณุงุณุฉ ูู ุงูููุฌุงุช
- โ TLS/SSL ููุนู ูุงุชุตุงูุงุช Atlas
- โ ุงุชุตุงูุงุช ูููุตูุฉ ููู ูุงุนุฏุฉ ุจูุงูุงุช

## ุงูุฃุฏุงุก

- ุงูุนูููุงุช ุงููุญููุฉ: **ุณุฑูุนุฉ ุฌุฏุงู** (ูุง ุชุฃุซูุฑ)
- ุงููุฒุงููุฉ: **ุบูุฑ ูุชุฒุงููุฉ** (ูู ุงูุฎูููุฉ)
- ูุงุฆูุฉ ุงูุงูุชุธุงุฑ: **10,000 ุนูููุฉ** ูู ุงูุฐุงูุฑุฉ
- ุงูุญูุธ ุนูู ุงููุฑุต: **ุบูุฑ ูุญุฏูุฏ**

## ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุฃุณุฆูุฉ:
- ุฑุงุฌุน `server/services/sync/README.md`
- ุฑุงุฌุน `.kiro/specs/dual-mongodb-sync/`
- ุชุญูู ูู ุงูููุฌุงุช ูู `server/logs/`
