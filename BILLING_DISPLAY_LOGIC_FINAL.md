# ููุทู ุนุฑุถ ุงูููุงุชูุฑ ูู ุตูุญุฉ ุงูููุงุชูุฑ - ุงูุชูุซูู ุงูููุงุฆู

## ุงููุงุนุฏุฉ ุงูุฃุณุงุณูุฉ

### ููุงุชูุฑ ุงูุฌูุณุงุช (ุงูุจูุงูุณุชูุดู/ุงูููุจููุชุฑ):

```
ุฅุฐุง ูุงูุช ุงููุงุชูุฑุฉ ุชุญุชูู ุนูู ุฌูุณุงุช:
  โโ ุฅุฐุง ูุงูุช ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ (bill.table === null)
  โ   โโ ุชุธูุฑ ูู ูุณู "ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู" โ
  โ
  โโ ุฅุฐุง ูุงูุช ูุฑุชุจุทุฉ ุจุทุงููุฉ (bill.table !== null)
      โโ ุชุธูุฑ ูู ุงูุทุงููุฉ ููุท โ
      โโ ูุง ุชุธูุฑ ูู ูุณู "ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู" โ
```

### ููุงุชูุฑ ุงููุงููู (ุจุฏูู ุฌูุณุงุช):

```
ุฅุฐุง ูุงูุช ุงููุงุชูุฑุฉ ูุง ุชุญุชูู ุนูู ุฌูุณุงุช:
  โโ ุฅุฐุง ูุงูุช ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ
  โ   โโ ุชุธูุฑ ูู ูุณู "ููุงุชูุฑ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ" โ
  โ
  โโ ุฅุฐุง ูุงูุช ูุฑุชุจุทุฉ ุจุทุงููุฉ
      โโ ุชุธูุฑ ูู ุงูุทุงููุฉ ููุท โ
```

## ุงูููุฏ ุงููุณุคูู

### 1. ุชุฌููุน ููุงุชูุฑ ุงูุจูุงูุณุชูุดู

```typescript
// ูู src/pages/Billing.tsx

allPlaystationBills.forEach((bill: Bill) => {
  const playstationSessions = bill.sessions?.filter((s: any) => 
    s.deviceType === 'playstation'
  ) || [];
  
  if (playstationSessions.length > 0) {
    playstationSessions.forEach((session: any) => {
      const deviceKey = session.deviceName || `ุฌูุงุฒ ${session.deviceNumber}`;
      const isLinkedToTable = !!bill.table; // โ ุงูููุชุงุญ ุงูุฃุณุงุณู
      
      // ุฅุถุงูุฉ ููุงุฆูุฉ allBills (ููุชุชุจุน)
      deviceData.allBills.push(bill);
      
      // ุฅุถุงูุฉ ููุงุฆูุฉ bills ููุท ุฅุฐุง ูู ุชูู ูุฑุชุจุทุฉ ุจุทุงููุฉ
      if (!isLinkedToTable) {
        deviceData.bills.push(bill); // โ ุชุธูุฑ ูู ูุณู ุงูุจูุงูุณุชูุดู
      } else {
        // ูุง ุชูุถุงู - ุณุชุธูุฑ ูู ุงูุทุงููุฉ ููุท
      }
    });
  }
});
```

### 2. ููุชุฑุฉ ููุงุชูุฑ ุงููุงููู

```typescript
const unlinkedBills = bills.filter((bill: Bill) => {
  // ูุฌุจ ุฃู ุชููู ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ
  if (bill.table) return false;
  
  // ุงุณุชุจุนุงุฏ ููุงุชูุฑ ุงูุจูุงูุณุชูุดู ูุงูููุจููุชุฑ
  if (bill.billType === 'playstation' || bill.billType === 'computer') {
    return false;
  }
  
  // ุงุณุชุจุนุงุฏ ุงูููุงุชูุฑ ุงูุชู ุชุญุชูู ุนูู ุฌูุณุงุช ุฃูุนุงุจ
  if (bill.sessions?.some((s: any) => 
    s.deviceType === 'playstation' || s.deviceType === 'computer'
  )) {
    return false;
  }
  
  // ูุฐู ูุงุชูุฑุฉ ูุงููู - ุชุธูุฑ ูู ูุณู "ููุงุชูุฑ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ"
  return true;
});
```

## ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุฌูุณุฉ ุจูุงูุณุชูุดู ุจุฏูู ุทุงููุฉ

```javascript
const bill = {
  _id: "bill001",
  billNumber: "B-001",
  billType: "playstation",
  table: null, // โ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ
  sessions: [{
    deviceName: "PS5-1",
    deviceType: "playstation",
    status: "active"
  }]
};

// ุงููุชูุฌุฉ:
// โ ุชุธูุฑ ูู ูุณู "ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู" ุชุญุช "PS5-1"
// โ ูุง ุชุธูุฑ ูู ูุณู "ููุงุชูุฑ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ"
```

### ูุซุงู 2: ุฌูุณุฉ ุจูุงูุณุชูุดู ูุน ุทุงููุฉ

```javascript
const bill = {
  _id: "bill002",
  billNumber: "B-002",
  billType: "playstation",
  table: { _id: "table5", number: 5 }, // โ ูุฑุชุจุทุฉ ุจุทุงููุฉ 5
  sessions: [{
    deviceName: "PS5-1",
    deviceType: "playstation",
    status: "active"
  }]
};

// ุงููุชูุฌุฉ:
// โ ุชุธูุฑ ูู ุทุงููุฉ 5 ููุท
// โ ูุง ุชุธูุฑ ูู ูุณู "ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู"
// โ ูุง ุชุธูุฑ ูู ูุณู "ููุงุชูุฑ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ"
```

### ูุซุงู 3: ูุงุชูุฑุฉ ูุงููู ุจุฏูู ุทุงููุฉ

```javascript
const bill = {
  _id: "bill003",
  billNumber: "B-003",
  billType: "cafe",
  table: null, // โ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ
  sessions: [], // โ ูุง ุชูุฌุฏ ุฌูุณุงุช
  orders: [{ items: [...] }]
};

// ุงููุชูุฌุฉ:
// โ ุชุธูุฑ ูู ูุณู "ููุงุชูุฑ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ"
// โ ูุง ุชุธูุฑ ูู ูุณู "ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู"
```

### ูุซุงู 4: ูุงุชูุฑุฉ ูุฎุชูุทุฉ (ุฌูุณุฉ + ุทูุจุงุช) ุจุฏูู ุทุงููุฉ

```javascript
const bill = {
  _id: "bill004",
  billNumber: "B-004",
  table: null, // โ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ
  sessions: [{
    deviceName: "PS5-2",
    deviceType: "playstation"
  }],
  orders: [{ items: [...] }] // ุทูุจุงุช ูุงููู
};

// ุงููุชูุฌุฉ:
// โ ุชุธูุฑ ูู ูุณู "ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู" ุชุญุช "PS5-2"
// โ ูุง ุชุธูุฑ ูู ูุณู "ููุงุชูุฑ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ"
// ุงูุณุจุจ: ูุฌูุฏ ุฌูุณุฉ ุจูุงูุณุชูุดู ูุฌุนููุง ุชูุตูู ููุงุชูุฑุฉ ุฃูุนุงุจ
```

### ูุซุงู 5: ูุงุชูุฑุฉ ูุฎุชูุทุฉ (ุฌูุณุฉ + ุทูุจุงุช) ูุน ุทุงููุฉ

```javascript
const bill = {
  _id: "bill005",
  billNumber: "B-005",
  table: { _id: "table7", number: 7 }, // โ ูุฑุชุจุทุฉ ุจุทุงููุฉ 7
  sessions: [{
    deviceName: "PS5-2",
    deviceType: "playstation"
  }],
  orders: [{ items: [...] }]
};

// ุงููุชูุฌุฉ:
// โ ุชุธูุฑ ูู ุทุงููุฉ 7 ููุท
// โ ูุง ุชุธูุฑ ูู ูุณู "ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู"
// โ ูุง ุชุธูุฑ ูู ูุณู "ููุงุชูุฑ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ"
```

## Console Logs ููุชุชุจุน

ุนูุฏ ูุชุญ ุตูุญุฉ ุงูููุงุชูุฑุ ุณุชุฌุฏ ูู Console:

### ููููุงุชูุฑ ุบูุฑ ุงููุฑุชุจุทุฉ ุจุทุงููุฉ:
```
๐ฎ ูุนุงูุฌุฉ ูุงุชูุฑุฉ B-001: {
  device: "PS5-1",
  isLinkedToTable: false,
  tableNumber: undefined,
  willShowInDeviceSection: true
}
โ ุฅุถุงูุฉ ูุงุชูุฑุฉ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ ููุฌูุงุฒ PS5-1: B-001
```

### ููููุงุชูุฑ ุงููุฑุชุจุทุฉ ุจุทุงููุฉ:
```
๐ฎ ูุนุงูุฌุฉ ูุงุชูุฑุฉ B-002: {
  device: "PS5-1",
  isLinkedToTable: true,
  tableNumber: 5,
  willShowInDeviceSection: false
}
โญ๏ธ ุชุฎุทู ูุงุชูุฑุฉ B-002 - ูุฑุชุจุทุฉ ุจุทุงููุฉ 5 - ุณุชุธูุฑ ูู ุงูุทุงููุฉ ููุท
```

## ุงูุชุฏูู ุงููุงูู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 1. ุฌูุจ ุฌููุน ุงูููุงุชูุฑ ูู API                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 2. ุชุตููุฉ ููุงุชูุฑ ุงูุจูุงูุณุชูุดู                                โ
โ    bills.filter(b => b.billType === 'playstation' ||       โ
โ                      b.sessions?.some(s => s.deviceType))   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 3. ุชุฌููุน ุญุณุจ ุงูุฌูุงุฒ                                         โ
โ    โโ PS5-1                                                 โ
โ    โโ PS5-2                                                 โ
โ    โโ Computer-1                                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 4. ูุญุต ูู ูุงุชูุฑุฉ                                            โ
โ    if (bill.table === null) {                               โ
โ      โ ุฃุถู ููุณู "ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู"                       โ
โ    } else {                                                 โ
โ      โญ๏ธ ุชุฎุทู - ุณุชุธูุฑ ูู ุงูุทุงููุฉ                           โ
โ    }                                                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 5. ุนุฑุถ ูู ุงููุงุฌูุฉ                                           โ
โ    ๐ฎ ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู                                     โ
โ      โโ PS5-1: ููุงุชูุฑ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ ููุท               โ
โ    ๐ช ุงูุทุงููุงุช                                              โ
โ      โโ ุทุงููุฉ 5: ุฌููุน ููุงุชูุฑ ุงูุทุงููุฉ (ุจูุง ูููุง ุงูุฌูุณุงุช)   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ุงูุฎูุงุตุฉ

### โ ุงูููุงุนุฏ ุงูุฃุณุงุณูุฉ:

1. **ููุงุชูุฑ ุงูุฌูุณุงุช ุบูุฑ ุงููุฑุชุจุทุฉ ุจุทุงููุฉ**:
   - ุชุธูุฑ ูู ูุณู "ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู"
   - ุชูุฌูุน ุญุณุจ ุงุณู ุงูุฌูุงุฒ

2. **ููุงุชูุฑ ุงูุฌูุณุงุช ุงููุฑุชุจุทุฉ ุจุทุงููุฉ**:
   - ุชุธูุฑ ูู ุงูุทุงููุฉ ููุท
   - ูุง ุชุธูุฑ ูู ูุณู "ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู"

3. **ููุงุชูุฑ ุงููุงููู ุบูุฑ ุงููุฑุชุจุทุฉ ุจุทุงููุฉ**:
   - ุชุธูุฑ ูู ูุณู "ููุงุชูุฑ ุบูุฑ ูุฑุชุจุทุฉ ุจุทุงููุฉ"
   - ูุง ุชุธูุฑ ูู ูุณู "ุฃุฌูุฒุฉ ุงูุจูุงูุณุชูุดู"

4. **ููุงุชูุฑ ุงููุงููู ุงููุฑุชุจุทุฉ ุจุทุงููุฉ**:
   - ุชุธูุฑ ูู ุงูุทุงููุฉ ููุท

### ๐ฏ ุงูููุชุงุญ ุงูุฃุณุงุณู:

```typescript
const isLinkedToTable = !!bill.table;

if (!isLinkedToTable) {
  // ุชุธูุฑ ูู ุงููุณู ุงูููุงุณุจ (ุจูุงูุณุชูุดู ุฃู ูุงููู)
} else {
  // ุชุธูุฑ ูู ุงูุทุงููุฉ ููุท
}
```

๐ **ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ!**
