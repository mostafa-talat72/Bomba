# تحسين رسائل الخطأ في نظام المخزون

## المشكلة الأصلية
كانت رسالة الخطأ عند عدم كفاية المخزون عامة جداً: "المخزون غير كافي" بدون تفاصيل عن:
- نوع المخزون غير الكافي
- الكمية المطلوبة
- الكمية المتوفرة

## الحل المطبق

### 1. تحسين رسائل الخطأ في `createOrder`
```javascript
// قبل التحسين
message: "المخزون غير كافي"

// بعد التحسين
message: "المخزون غير كافي - راجع التفاصيل أدناه",
errors: validationErrors,
details: validationErrors.join(" | ")
```

### 2. تحسين رسائل الخطأ في `updateOrder`
نفس التحسين المطبق على `createOrder`

### 3. رسائل الخطأ المفصلة في `validateInventoryAvailability`
```javascript
validationErrors.push(
    `المخزون غير كافي لـ ${inventoryItem.name}. المطلوب: ${convertedQuantityNeeded} ${inventoryItem.unit}، المتوفر: ${inventoryItem.currentStock} ${inventoryItem.unit}`
);
```

### 4. رسائل الخطأ المفصلة في `updateOrderItemPrepared`
```javascript
message: `المخزون غير كافي لـ ${inventoryItem.name}. المطلوب: ${quantityToDeduct} ${inventoryItem.unit}، المتوفر: ${inventoryItem.currentStock} ${inventoryItem.unit}`
```

## مثال على رسالة الخطأ المحسنة

### قبل التحسين:
```json
{
  "success": false,
  "message": "المخزون غير كافي"
}
```

### بعد التحسين:
```json
{
  "success": false,
  "message": "المخزون غير كافي - راجع التفاصيل أدناه",
  "errors": [
    "المخزون غير كافي لـ قهوة تركية. المطلوب: 50 جرام، المتوفر: 30 جرام",
    "المخزون غير كافي لـ حليب. المطلوب: 200 مل، المتوفر: 150 مل"
  ],
  "details": "المخزون غير كافي لـ قهوة تركية. المطلوب: 50 جرام، المتوفر: 30 جرام | المخزون غير كافي لـ حليب. المطلوب: 200 مل، المتوفر: 150 مل"
}
```

## الفوائد

1. **وضوح أكبر**: المستخدم يعرف بالضبط أي مخزون غير كافي
2. **سهولة الإصلاح**: يمكن للمستخدم معرفة الكمية المطلوبة والمتوفرة
3. **تعدد الأخطاء**: يمكن عرض عدة أخطاء في نفس الوقت
4. **مرونة في العرض**: يمكن للواجهة الأمامية عرض التفاصيل بالشكل المناسب

## الدوال المتأثرة

- `createOrder`: إنشاء طلب جديد
- `updateOrder`: تحديث طلب موجود
- `updateOrderItemPrepared`: تحديث عدد الأصناف الجاهزة
- `validateInventoryAvailability`: التحقق من توفر المخزون

## ملاحظات تقنية

- تم إضافة حقل `details` يحتوي على جميع رسائل الخطأ مجمعة
- حقل `errors` يحتوي على مصفوفة من رسائل الخطأ المفصلة
- الرسالة الرئيسية أصبحت أكثر وضوحاً مع إشارة للتفاصيل
