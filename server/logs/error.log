{"timestamp":"2025-08-08T03:49:52.460Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T03:50:05.339Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T03:50:22.234Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T03:57:12.980Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T03:58:27.733Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T03:59:38.734Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T04:00:03.919Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T04:01:16.406Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T04:05:17.856Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T04:08:06.768Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T04:09:37.092Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T04:10:53.338Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T04:11:00.292Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T04:26:08.735Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T04:26:16.829Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T04:28:55.549Z","level":"ERROR","message":"خطأ في تسجيل الدفع","errors":{"paid":{"stringValue":"\"NaN\"","valueType":"number","kind":"Number","value":null,"path":"paid","reason":{"generatedMessage":true,"code":"ERR_ASSERTION","actual":false,"expected":true,"operator":"=="},"name":"CastError","message":"Cast to Number failed for value \"NaN\" (type number) at path \"paid\""},"payments.0.amount":{"name":"ValidatorError","message":"Path `amount` is required.","properties":{"message":"Path `amount` is required.","type":"required","path":"amount"},"kind":"required","path":"amount"}},"_message":"Bill validation failed"}
{"timestamp":"2025-08-08T13:07:22.146Z","level":"ERROR","message":"Failed to export to PDF","error":"jsPDF is not a constructor"}
{"timestamp":"2025-08-08T13:36:31.501Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:36:33.300Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:36:38.310Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:36:43.311Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:36:48.324Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:36:48.326Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:36:53.309Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:36:58.323Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:03.320Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:08.330Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:13.284Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:18.342Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:18.380Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:23.291Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:28.344Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:33.291Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:38.339Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:43.348Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:48.350Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:48.355Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:53.304Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:37:58.292Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:03.305Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:08.302Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:13.296Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:18.298Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:18.321Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:23.308Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:28.288Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:33.300Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:41.728Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:43.315Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:48.348Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:48.350Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:53.312Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:38:58.329Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:03.300Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:08.374Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:13.298Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:18.342Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:18.368Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:23.298Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:28.283Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:33.298Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:38.303Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:43.307Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:48.342Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:48.344Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:53.337Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:39:58.330Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:40:03.337Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:40:08.288Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:40:13.311Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:40:18.307Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:40:18.341Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:40:23.322Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:40:28.345Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T13:40:33.305Z","level":"ERROR","message":"getUserNotifications error:"}
{"timestamp":"2025-08-08T15:23:51.608Z","level":"ERROR","message":"خطأ في إنشاء الفهارس","errorLabelSet":{},"errorResponse":{"ok":0,"errmsg":"only one text index per collection allowed, found existing text index \"organization_1_customerName_text\"","code":67,"codeName":"CannotCreateIndex","$clusterTime":{"clusterTime":{"$timestamp":"7536235795527499793"},"signature":{"hash":"MIYP6q8QmtPB/cBT6q7MwGAJ6Wg=","keyId":{"low":5,"high":1740590000,"unsigned":false}}},"operationTime":{"$timestamp":"7536235795527499793"}},"ok":0,"code":67,"codeName":"CannotCreateIndex","$clusterTime":{"clusterTime":{"$timestamp":"7536235795527499793"},"signature":{"hash":"MIYP6q8QmtPB/cBT6q7MwGAJ6Wg=","keyId":{"low":5,"high":1740590000,"unsigned":false}}},"operationTime":{"$timestamp":"7536235795527499793"}}
{"timestamp":"2025-08-08T17:12:00.058Z","level":"ERROR","message":"❌ Bill total not updated correctly"}
{"timestamp":"2025-08-08T19:12:04.680Z","level":"ERROR","message":"getActiveSessions error:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"RSSecondary","hosts":["cluster0-shard-00-00.kqay8.mongodb.net:27017","cluster0-shard-00-01.kqay8.mongodb.net:27017","cluster0-shard-00-02.kqay8.mongodb.net:27017"],"passives":[],"arbiters":[],"tags":{"region":"ME_SOUTH_1","workloadType":"OPERATIONAL","availabilityZone":"mes1-az1","diskState":"READY","provider":"AWS","nodeType":"ELECTABLE"},"minWireVersion":0,"maxWireVersion":25,"roundTripTime":9857.285714285714,"minRoundTripTime":622,"lastUpdateTime":282031916,"lastWriteDate":{"$date":"2025-08-08T19:11:49Z"},"error":null,"topologyVersion":{"processId":{"$oid":"6890e04bb370f6201c382541"},"counter":4},"setName":"atlas-ll01dn-shard-0","setVersion":9,"electionId":null,"logicalSessionTimeoutMinutes":30,"maxMessageSizeBytes":48000000,"maxWriteBatchSize":100000,"maxBsonObjectSize":16777216,"primary":"cluster0-shard-00-01.kqay8.mongodb.net:27017","me":"cluster0-shard-00-00.kqay8.mongodb.net:27017","$clusterTime":{"clusterTime":{"$timestamp":{"t":1754680309,"i":2}},"signature":{"hash":{"$binary":{"base64":"DrbzlRr/AdkA+FCce9tCGzs3VsM=","subType":"00"}},"keyId":7475777125744640000}},"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":282031976,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":282031992,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":30}}
{"timestamp":"2025-08-08T19:12:04.689Z","level":"ERROR","message":"getUserNotifications error:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"RSSecondary","hosts":["cluster0-shard-00-00.kqay8.mongodb.net:27017","cluster0-shard-00-01.kqay8.mongodb.net:27017","cluster0-shard-00-02.kqay8.mongodb.net:27017"],"passives":[],"arbiters":[],"tags":{"region":"ME_SOUTH_1","workloadType":"OPERATIONAL","availabilityZone":"mes1-az1","diskState":"READY","provider":"AWS","nodeType":"ELECTABLE"},"minWireVersion":0,"maxWireVersion":25,"roundTripTime":9857.285714285714,"minRoundTripTime":622,"lastUpdateTime":282031916,"lastWriteDate":{"$date":"2025-08-08T19:11:49Z"},"error":null,"topologyVersion":{"processId":{"$oid":"6890e04bb370f6201c382541"},"counter":4},"setName":"atlas-ll01dn-shard-0","setVersion":9,"electionId":null,"logicalSessionTimeoutMinutes":30,"maxMessageSizeBytes":48000000,"maxWriteBatchSize":100000,"maxBsonObjectSize":16777216,"primary":"cluster0-shard-00-01.kqay8.mongodb.net:27017","me":"cluster0-shard-00-00.kqay8.mongodb.net:27017","$clusterTime":{"clusterTime":{"$timestamp":{"t":1754680309,"i":2}},"signature":{"hash":{"$binary":{"base64":"DrbzlRr/AdkA+FCce9tCGzs3VsM=","subType":"00"}},"keyId":7475777125744640000}},"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":282031976,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":282031992,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":30}}
{"timestamp":"2025-08-08T19:12:04.704Z","level":"ERROR","message":"getActiveSessions error:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"RSSecondary","hosts":["cluster0-shard-00-00.kqay8.mongodb.net:27017","cluster0-shard-00-01.kqay8.mongodb.net:27017","cluster0-shard-00-02.kqay8.mongodb.net:27017"],"passives":[],"arbiters":[],"tags":{"region":"ME_SOUTH_1","workloadType":"OPERATIONAL","availabilityZone":"mes1-az1","diskState":"READY","provider":"AWS","nodeType":"ELECTABLE"},"minWireVersion":0,"maxWireVersion":25,"roundTripTime":9857.285714285714,"minRoundTripTime":622,"lastUpdateTime":282031916,"lastWriteDate":{"$date":"2025-08-08T19:11:49Z"},"error":null,"topologyVersion":{"processId":{"$oid":"6890e04bb370f6201c382541"},"counter":4},"setName":"atlas-ll01dn-shard-0","setVersion":9,"electionId":null,"logicalSessionTimeoutMinutes":30,"maxMessageSizeBytes":48000000,"maxWriteBatchSize":100000,"maxBsonObjectSize":16777216,"primary":"cluster0-shard-00-01.kqay8.mongodb.net:27017","me":"cluster0-shard-00-00.kqay8.mongodb.net:27017","$clusterTime":{"clusterTime":{"$timestamp":{"t":1754680309,"i":2}},"signature":{"hash":{"$binary":{"base64":"DrbzlRr/AdkA+FCce9tCGzs3VsM=","subType":"00"}},"keyId":7475777125744640000}},"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":282031976,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":282031992,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":30}}
{"timestamp":"2025-08-08T21:40:07.184Z","level":"ERROR","message":"Order save error:","error":"Order validation failed: orderNumber: Path `orderNumber` is required.","stack":"ValidationError: Order validation failed: orderNumber: Path `orderNumber` is required.\n    at Document.invalidate (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongoose\\lib\\document.js:3352:32)\n    at H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongoose\\lib\\document.js:3113:17\n    at H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongoose\\lib\\schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","orderData":{"customerName":"عميل (بلايستيشن 1) PSps1","itemsCount":3,"subtotal":25}}
{"timestamp":"2025-08-08T21:46:11.869Z","level":"ERROR","message":"خطأ في حفظ الطلب:","error":"E11000 duplicate key error collection: test.orders index: orderNumber_1 dup key: { orderNumber: \"ORD-20250808-001\" }","code":11000,"name":"MongoServerError","stack":"MongoServerError: E11000 duplicate key error collection: test.orders index: orderNumber_1 dup key: { orderNumber: \"ORD-20250808-001\" }\n    at InsertOneOperation.execute (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.insertOne (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\collection.js:157:16)","retryCount":1,"orderData":{"customerName":"عميل (بلايستيشن 1) PSps1","itemsCount":3,"subtotal":25}}
{"timestamp":"2025-08-08T21:46:12.211Z","level":"ERROR","message":"خطأ في حفظ الطلب:","error":"E11000 duplicate key error collection: test.orders index: orderNumber_1 dup key: { orderNumber: \"ORD-20250808-001\" }","code":11000,"name":"MongoServerError","stack":"MongoServerError: E11000 duplicate key error collection: test.orders index: orderNumber_1 dup key: { orderNumber: \"ORD-20250808-001\" }\n    at InsertOneOperation.execute (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.insertOne (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\collection.js:157:16)","retryCount":2,"orderData":{"customerName":"عميل (بلايستيشن 1) PSps1","itemsCount":3,"subtotal":25}}
{"timestamp":"2025-08-08T21:46:12.624Z","level":"ERROR","message":"خطأ في حفظ الطلب:","error":"E11000 duplicate key error collection: test.orders index: orderNumber_1 dup key: { orderNumber: \"ORD-20250808-001\" }","code":11000,"name":"MongoServerError","stack":"MongoServerError: E11000 duplicate key error collection: test.orders index: orderNumber_1 dup key: { orderNumber: \"ORD-20250808-001\" }\n    at InsertOneOperation.execute (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.insertOne (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\collection.js:157:16)","retryCount":3,"orderData":{"customerName":"عميل (بلايستيشن 1) PSps1","itemsCount":3,"subtotal":25}}
{"timestamp":"2025-08-08T21:46:13.112Z","level":"ERROR","message":"خطأ في حفظ الطلب:","error":"E11000 duplicate key error collection: test.orders index: orderNumber_1 dup key: { orderNumber: \"ORD-20250808-001\" }","code":11000,"name":"MongoServerError","stack":"MongoServerError: E11000 duplicate key error collection: test.orders index: orderNumber_1 dup key: { orderNumber: \"ORD-20250808-001\" }\n    at InsertOneOperation.execute (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.insertOne (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\collection.js:157:16)","retryCount":4,"orderData":{"customerName":"عميل (بلايستيشن 1) PSps1","itemsCount":3,"subtotal":25}}
{"timestamp":"2025-08-08T21:46:13.112Z","level":"ERROR","message":"فشل في إنشاء الطلب بعد عدة محاولات","maxRetries":3,"lastError":"E11000 duplicate key error collection: test.orders index: orderNumber_1 dup key: { orderNumber: \"ORD-20250808-001\" }"}
{"timestamp":"2025-08-08T21:51:46.526Z","level":"ERROR","message":"خطأ في إنشاء الفاتورة","errorLabelSet":{},"errorResponse":{"index":0,"code":11000,"errmsg":"E11000 duplicate key error collection: test.bills index: billNumber_1 dup key: { billNumber: \"INV-20250808-001\" }","keyPattern":{"billNumber":1},"keyValue":{"billNumber":"INV-20250808-001"}},"index":0,"code":11000,"keyPattern":{"billNumber":1},"keyValue":{"billNumber":"INV-20250808-001"}}
{"0":"M","1":"o","2":"n","3":"g","4":"o","5":"S","6":"e","7":"r","8":"v","9":"e","10":"r","11":"E","12":"r","13":"r","14":"o","15":"r","16":":","17":" ","18":"E","19":"1","20":"1","21":"0","22":"0","23":"0","24":" ","25":"d","26":"u","27":"p","28":"l","29":"i","30":"c","31":"a","32":"t","33":"e","34":" ","35":"k","36":"e","37":"y","38":" ","39":"e","40":"r","41":"r","42":"o","43":"r","44":" ","45":"c","46":"o","47":"l","48":"l","49":"e","50":"c","51":"t","52":"i","53":"o","54":"n","55":":","56":" ","57":"t","58":"e","59":"s","60":"t","61":".","62":"b","63":"i","64":"l","65":"l","66":"s","67":" ","68":"i","69":"n","70":"d","71":"e","72":"x","73":":","74":" ","75":"b","76":"i","77":"l","78":"l","79":"N","80":"u","81":"m","82":"b","83":"e","84":"r","85":"_","86":"1","87":" ","88":"d","89":"u","90":"p","91":" ","92":"k","93":"e","94":"y","95":":","96":" ","97":"{","98":" ","99":"b","100":"i","101":"l","102":"l","103":"N","104":"u","105":"m","106":"b","107":"e","108":"r","109":":","110":" ","111":"\"","112":"I","113":"N","114":"V","115":"-","116":"2","117":"0","118":"2","119":"5","120":"0","121":"8","122":"0","123":"8","124":"-","125":"0","126":"0","127":"1","128":"\"","129":" ","130":"}","131":"\n","132":" ","133":" ","134":" ","135":" ","136":"a","137":"t","138":" ","139":"I","140":"n","141":"s","142":"e","143":"r","144":"t","145":"O","146":"n","147":"e","148":"O","149":"p","150":"e","151":"r","152":"a","153":"t","154":"i","155":"o","156":"n","157":".","158":"e","159":"x","160":"e","161":"c","162":"u","163":"t","164":"e","165":" ","166":"(","167":"H","168":":","169":"\\","170":"M","171":"y","172":" ","173":"W","174":"o","175":"r","176":"k","177":"\\","178":"N","179":"a","180":"r","181":"u","182":"t","183":"o","184":"\\","185":"N","186":"e","187":"w","188":" ","189":"f","190":"o","191":"l","192":"d","193":"e","194":"r","195":" ","196":"(","197":"2","198":")","199":"\\","200":"p","201":"r","202":"o","203":"j","204":"e","205":"c","206":"t","207":"\\","208":"s","209":"e","210":"r","211":"v","212":"e","213":"r","214":"\\","215":"n","216":"o","217":"d","218":"e","219":"_","220":"m","221":"o","222":"d","223":"u","224":"l","225":"e","226":"s","227":"\\","228":"m","229":"o","230":"n","231":"g","232":"o","233":"d","234":"b","235":"\\","236":"l","237":"i","238":"b","239":"\\","240":"o","241":"p","242":"e","243":"r","244":"a","245":"t","246":"i","247":"o","248":"n","249":"s","250":"\\","251":"i","252":"n","253":"s","254":"e","255":"r","256":"t","257":".","258":"j","259":"s","260":":","261":"5","262":"1","263":":","264":"1","265":"9","266":")","267":"\n","268":" ","269":" ","270":" ","271":" ","272":"a","273":"t","274":" ","275":"p","276":"r","277":"o","278":"c","279":"e","280":"s","281":"s","282":".","283":"p","284":"r","285":"o","286":"c","287":"e","288":"s","289":"s","290":"T","291":"i","292":"c","293":"k","294":"s","295":"A","296":"n","297":"d","298":"R","299":"e","300":"j","301":"e","302":"c","303":"t","304":"i","305":"o","306":"n","307":"s","308":" ","309":"(","310":"n","311":"o","312":"d","313":"e","314":":","315":"i","316":"n","317":"t","318":"e","319":"r","320":"n","321":"a","322":"l","323":"/","324":"p","325":"r","326":"o","327":"c","328":"e","329":"s","330":"s","331":"/","332":"t","333":"a","334":"s","335":"k","336":"_","337":"q","338":"u","339":"e","340":"u","341":"e","342":"s","343":":","344":"1","345":"0","346":"5","347":":","348":"5","349":")","350":"\n","351":" ","352":" ","353":" ","354":" ","355":"a","356":"t","357":" ","358":"a","359":"s","360":"y","361":"n","362":"c","363":" ","364":"t","365":"r","366":"y","367":"O","368":"p","369":"e","370":"r","371":"a","372":"t","373":"i","374":"o","375":"n","376":" ","377":"(","378":"H","379":":","380":"\\","381":"M","382":"y","383":" ","384":"W","385":"o","386":"r","387":"k","388":"\\","389":"N","390":"a","391":"r","392":"u","393":"t","394":"o","395":"\\","396":"N","397":"e","398":"w","399":" ","400":"f","401":"o","402":"l","403":"d","404":"e","405":"r","406":" ","407":"(","408":"2","409":")","410":"\\","411":"p","412":"r","413":"o","414":"j","415":"e","416":"c","417":"t","418":"\\","419":"s","420":"e","421":"r","422":"v","423":"e","424":"r","425":"\\","426":"n","427":"o","428":"d","429":"e","430":"_","431":"m","432":"o","433":"d","434":"u","435":"l","436":"e","437":"s","438":"\\","439":"m","440":"o","441":"n","442":"g","443":"o","444":"d","445":"b","446":"\\","447":"l","448":"i","449":"b","450":"\\","451":"o","452":"p","453":"e","454":"r","455":"a","456":"t","457":"i","458":"o","459":"n","460":"s","461":"\\","462":"e","463":"x","464":"e","465":"c","466":"u","467":"t","468":"e","469":"_","470":"o","471":"p","472":"e","473":"r","474":"a","475":"t","476":"i","477":"o","478":"n","479":".","480":"j","481":"s","482":":","483":"2","484":"0","485":"7","486":":","487":"2","488":"0","489":")","490":"\n","491":" ","492":" ","493":" ","494":" ","495":"a","496":"t","497":" ","498":"a","499":"s","500":"y","501":"n","502":"c","503":" ","504":"e","505":"x","506":"e","507":"c","508":"u","509":"t","510":"e","511":"O","512":"p","513":"e","514":"r","515":"a","516":"t","517":"i","518":"o","519":"n","520":" ","521":"(","522":"H","523":":","524":"\\","525":"M","526":"y","527":" ","528":"W","529":"o","530":"r","531":"k","532":"\\","533":"N","534":"a","535":"r","536":"u","537":"t","538":"o","539":"\\","540":"N","541":"e","542":"w","543":" ","544":"f","545":"o","546":"l","547":"d","548":"e","549":"r","550":" ","551":"(","552":"2","553":")","554":"\\","555":"p","556":"r","557":"o","558":"j","559":"e","560":"c","561":"t","562":"\\","563":"s","564":"e","565":"r","566":"v","567":"e","568":"r","569":"\\","570":"n","571":"o","572":"d","573":"e","574":"_","575":"m","576":"o","577":"d","578":"u","579":"l","580":"e","581":"s","582":"\\","583":"m","584":"o","585":"n","586":"g","587":"o","588":"d","589":"b","590":"\\","591":"l","592":"i","593":"b","594":"\\","595":"o","596":"p","597":"e","598":"r","599":"a","600":"t","601":"i","602":"o","603":"n","604":"s","605":"\\","606":"e","607":"x","608":"e","609":"c","610":"u","611":"t","612":"e","613":"_","614":"o","615":"p","616":"e","617":"r","618":"a","619":"t","620":"i","621":"o","622":"n","623":".","624":"j","625":"s","626":":","627":"7","628":"5","629":":","630":"1","631":"6","632":")","633":"\n","634":" ","635":" ","636":" ","637":" ","638":"a","639":"t","640":" ","641":"a","642":"s","643":"y","644":"n","645":"c","646":" ","647":"C","648":"o","649":"l","650":"l","651":"e","652":"c","653":"t","654":"i","655":"o","656":"n","657":".","658":"i","659":"n","660":"s","661":"e","662":"r","663":"t","664":"O","665":"n","666":"e","667":" ","668":"(","669":"H","670":":","671":"\\","672":"M","673":"y","674":" ","675":"W","676":"o","677":"r","678":"k","679":"\\","680":"N","681":"a","682":"r","683":"u","684":"t","685":"o","686":"\\","687":"N","688":"e","689":"w","690":" ","691":"f","692":"o","693":"l","694":"d","695":"e","696":"r","697":" ","698":"(","699":"2","700":")","701":"\\","702":"p","703":"r","704":"o","705":"j","706":"e","707":"c","708":"t","709":"\\","710":"s","711":"e","712":"r","713":"v","714":"e","715":"r","716":"\\","717":"n","718":"o","719":"d","720":"e","721":"_","722":"m","723":"o","724":"d","725":"u","726":"l","727":"e","728":"s","729":"\\","730":"m","731":"o","732":"n","733":"g","734":"o","735":"d","736":"b","737":"\\","738":"l","739":"i","740":"b","741":"\\","742":"c","743":"o","744":"l","745":"l","746":"e","747":"c","748":"t","749":"i","750":"o","751":"n","752":".","753":"j","754":"s","755":":","756":"1","757":"5","758":"7","759":":","760":"1","761":"6","762":")","timestamp":"2025-08-08T21:51:46.526Z","level":"ERROR","message":"Error stack:"}
{"0":"c","1":"o","2":"m","3":"p","4":"l","5":"e","6":"t","7":"e","8":"d","timestamp":"2025-08-08T22:20:55.219Z","level":"ERROR","message":"❌ Session is not active:"}
{"timestamp":"2025-08-08T22:20:55.905Z","level":"ERROR","message":"❌ Bill total not updated correctly"}
{"timestamp":"2025-08-08T22:36:55.864Z","level":"ERROR","message":"❌ Bill total not updated correctly"}
{"timestamp":"2025-08-08T22:37:54.309Z","level":"ERROR","message":"❌ Bill total not updated correctly"}
{"timestamp":"2025-08-09T21:05:33.590Z","level":"ERROR","message":"❌ Error updating bill:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375244035,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375245975,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375245935,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-09T21:05:33.613Z","level":"ERROR","message":"❌ updateSessionCost error:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375244035,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375245975,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375245935,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-09T21:05:33.615Z","level":"ERROR","message":"❌ updateSessionCost error:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375244035,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375245975,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375245935,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-09T21:05:33.620Z","level":"ERROR","message":"❌ Error updating bill:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375244035,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375245975,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375245935,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-09T21:05:33.623Z","level":"ERROR","message":"❌ updateSessionCost error:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375244035,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375245975,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":375245935,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-09T22:00:10.256Z","level":"ERROR","message":"Failed to check low stock","error":"getaddrinfo ENOTFOUND cluster0-shard-00-00.kqay8.mongodb.net"}
{"timestamp":"2025-08-09T23:00:00.900Z","level":"ERROR","message":"Database backup failed","error":"Command failed: mongodump --uri=\"mongodb+srv://Saa3d-DB:NrPd3ziWiiZUeumA@cluster0.kqay8.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0\" --gzip --archive=\"backups\\bomba-backup-2025-08-09T23-00-00-492Z.gz\"\n'mongodump' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n"}
{"timestamp":"2025-08-09T23:00:00.901Z","level":"ERROR","message":"Scheduled backup failed","error":"فشل في إنشاء النسخة الاحتياطية: Command failed: mongodump --uri=\"mongodb+srv://Saa3d-DB:NrPd3ziWiiZUeumA@cluster0.kqay8.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0\" --gzip --archive=\"backups\\bomba-backup-2025-08-09T23-00-00-492Z.gz\"\n'mongodump' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n"}
{"timestamp":"2025-08-09T23:00:10.513Z","level":"ERROR","message":"❌ خطأ في جدولة تنظيف الإشعارات:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":382126253,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":382126254,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":382126252,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-09T23:00:10.515Z","level":"ERROR","message":"Failed to check low stock","error":"getaddrinfo ENOTFOUND cluster0-shard-00-00.kqay8.mongodb.net"}
{"timestamp":"2025-08-10T00:00:10.443Z","level":"ERROR","message":"Failed to check low stock","error":"getaddrinfo ENOTFOUND cluster0-shard-00-00.kqay8.mongodb.net"}
{"timestamp":"2025-08-10T00:00:10.474Z","level":"ERROR","message":"Error cleaning expired notifications:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":385716247,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":385726154,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":385726155,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-10T00:00:10.477Z","level":"ERROR","message":"❌ Failed to clean expired notifications:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":385716247,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":385726154,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":385726155,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-10T01:00:10.809Z","level":"ERROR","message":"Failed to check low stock","error":"getaddrinfo ENOTFOUND cluster0-shard-00-00.kqay8.mongodb.net"}
{"0":"c","1":"o","2":"m","3":"p","4":"l","5":"e","6":"t","7":"e","8":"d","timestamp":"2025-08-10T11:12:45.924Z","level":"ERROR","message":"❌ Session is not active:"}
{"timestamp":"2025-08-10T11:14:51.700Z","level":"ERROR","message":"❌ Bill total not updated correctly"}
{"timestamp":"2025-08-10T11:47:42.657Z","level":"ERROR","message":"❌ Bill total not updated correctly"}
{"timestamp":"2025-08-10T11:50:03.550Z","level":"ERROR","message":"❌ Bill total not updated correctly"}
{"0":"c","1":"o","2":"m","3":"p","4":"l","5":"e","6":"t","7":"e","8":"d","timestamp":"2025-08-10T11:50:04.052Z","level":"ERROR","message":"❌ Session is not active:"}
{"timestamp":"2025-08-10T11:55:46.478Z","level":"ERROR","message":"❌ Bill total not updated correctly"}
{"0":"c","1":"o","2":"m","3":"p","4":"l","5":"e","6":"t","7":"e","8":"d","timestamp":"2025-08-10T11:56:13.979Z","level":"ERROR","message":"❌ Session is not active:"}
{"timestamp":"2025-08-10T12:27:40.430Z","level":"ERROR","message":"❌ Bill total not updated correctly"}
{"timestamp":"2025-08-10T12:38:53.229Z","level":"ERROR","message":"❌ Bill total not updated correctly"}
{"timestamp":"2025-08-10T17:09:54.866Z","level":"ERROR","message":"getActiveSessions error:","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"RSSecondary","hosts":["cluster0-shard-00-00.kqay8.mongodb.net:27017","cluster0-shard-00-01.kqay8.mongodb.net:27017","cluster0-shard-00-02.kqay8.mongodb.net:27017"],"passives":[],"arbiters":[],"tags":{"provider":"AWS","nodeType":"ELECTABLE","workloadType":"OPERATIONAL","region":"ME_SOUTH_1","diskState":"READY","availabilityZone":"mes1-az1"},"minWireVersion":0,"maxWireVersion":25,"roundTripTime":99,"minRoundTripTime":99,"lastUpdateTime":447501486,"lastWriteDate":{"$date":"2025-08-10T17:09:46Z"},"error":null,"topologyVersion":{"processId":{"$oid":"6890e04bb370f6201c382541"},"counter":4},"setName":"atlas-ll01dn-shard-0","setVersion":9,"electionId":null,"logicalSessionTimeoutMinutes":30,"maxMessageSizeBytes":48000000,"maxWriteBatchSize":100000,"maxBsonObjectSize":16777216,"primary":"cluster0-shard-00-01.kqay8.mongodb.net:27017","me":"cluster0-shard-00-00.kqay8.mongodb.net:27017","$clusterTime":{"clusterTime":{"$timestamp":{"t":1754845786,"i":1}},"signature":{"hash":{"$binary":{"base64":"YoWMktQg14H6odoL26/huP346sw=","subType":"00"}},"keyId":7475777125744640000}},"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":447510378,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"RSSecondary","hosts":["cluster0-shard-00-00.kqay8.mongodb.net:27017","cluster0-shard-00-01.kqay8.mongodb.net:27017","cluster0-shard-00-02.kqay8.mongodb.net:27017"],"passives":[],"arbiters":[],"tags":{"availabilityZone":"mes1-az3","diskState":"READY","provider":"AWS","region":"ME_SOUTH_1","nodeType":"ELECTABLE","workloadType":"OPERATIONAL"},"minWireVersion":0,"maxWireVersion":25,"roundTripTime":95,"minRoundTripTime":95,"lastUpdateTime":447501695,"lastWriteDate":{"$date":"2025-08-10T17:09:46Z"},"error":null,"topologyVersion":{"processId":{"$oid":"6890e4ec0efec1a8987df916"},"counter":3},"setName":"atlas-ll01dn-shard-0","setVersion":9,"electionId":null,"logicalSessionTimeoutMinutes":30,"maxMessageSizeBytes":48000000,"maxWriteBatchSize":100000,"maxBsonObjectSize":16777216,"primary":"cluster0-shard-00-01.kqay8.mongodb.net:27017","me":"cluster0-shard-00-02.kqay8.mongodb.net:27017","$clusterTime":{"clusterTime":{"$timestamp":{"t":1754845786,"i":2}},"signature":{"hash":{"$binary":{"base64":"YoWMktQg14H6odoL26/huP346sw=","subType":"00"}},"keyId":7475777125744640000}},"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":30}}
{"timestamp":"2025-08-10T17:11:31.174Z","level":"ERROR","message":"Error getting user notifications with permission filter:","errorLabelSet":{},"beforeHandshake":false,"connectionGeneration":17}
{"timestamp":"2025-08-10T17:11:31.175Z","level":"ERROR","message":"getUserNotifications error:","errorLabelSet":{},"beforeHandshake":false,"connectionGeneration":17}
{"timestamp":"2025-08-10T17:11:31.181Z","level":"ERROR","message":"Error getting user notifications with permission filter:","errorLabelSet":{},"beforeHandshake":false,"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017"}
{"timestamp":"2025-08-10T17:11:31.182Z","level":"ERROR","message":"getUserNotifications error:","errorLabelSet":{},"beforeHandshake":false,"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017"}
{"timestamp":"2025-08-10T17:11:40.959Z","level":"ERROR","message":"getUserNotifications error:","errorLabelSet":{},"beforeHandshake":false,"connectionGeneration":17}
{"timestamp":"2025-08-10T17:12:12.899Z","level":"ERROR","message":"خطأ في جلب الفاتورة","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"cluster0-shard-00-00.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-00.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":447648266,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-01.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-01.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":447648515,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"cluster0-shard-00-02.kqay8.mongodb.net:27017":{"address":"cluster0-shard-00-02.kqay8.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":447648265,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-ll01dn-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000b4"},"maxSetVersion":9,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-14T21:00:10.368Z","level":"ERROR","message":"❌ Critical error in low stock check","startTime":"2025-08-14T21:00:00.361Z","endTime":"2025-08-14T21:00:10.366Z","duration":"10005ms","error":"getaddrinfo ENOTFOUND sjc1.clusters.zeabur.com","stack":"MongoServerSelectionError: getaddrinfo ENOTFOUND sjc1.clusters.zeabur.com\n    at Topology.selectServer (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\sdam\\topology.js:326:38)\n    at async tryOperation (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:145:18)\n    at async executeOperation (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async FindCursor._initialize (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:61:26)\n    at async FindCursor.cursorInit (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:633:27)\n    at async FindCursor.fetchBatch (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:667:13)\n    at async FindCursor.next (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:347:17)\n    at async [Symbol.asyncIterator] (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:255:34)\n    at async FindCursor.toArray (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:427:26)\n    at async model.Query._find (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongoose\\lib\\query.js:2407:14)\n    at async model.Query.exec (H:\\My Work\\Naruto\\New folder (2)\\project\\server\\node_modules\\mongoose\\lib\\query.js:4604:63)\n    at async Task.checkLowStock [as _execution] (file:///H:/My%20Work/Naruto/New%20folder%20(2)/project/server/utils/scheduler.js:80:31)","success":false}
{"timestamp":"2025-08-14T21:00:10.447Z","level":"ERROR","message":"Failed to create recurring costs","error":"getaddrinfo ENOTFOUND sjc1.clusters.zeabur.com"}
{"timestamp":"2025-08-14T21:00:10.442Z","level":"ERROR","message":"Failed to update overdue items","error":"getaddrinfo ENOTFOUND sjc1.clusters.zeabur.com"}
{"timestamp":"2025-08-14T23:00:10.112Z","level":"ERROR","message":"❌ خطأ في جدولة تنظيف الإشعارات:","errorLabelSet":{},"reason":{"type":"Single","servers":{"sjc1.clusters.zeabur.com:30733":{"address":"sjc1.clusters.zeabur.com:30733","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":58800562,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":null,"maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-15T00:00:10.798Z","level":"ERROR","message":"Error cleaning expired notifications:","errorLabelSet":{},"reason":{"type":"Single","servers":{"sjc1.clusters.zeabur.com:30733":{"address":"sjc1.clusters.zeabur.com:30733","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":62404479,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":null,"maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-15T00:00:10.799Z","level":"ERROR","message":"❌ Failed to clean expired notifications:","errorLabelSet":{},"reason":{"type":"Single","servers":{"sjc1.clusters.zeabur.com:30733":{"address":"sjc1.clusters.zeabur.com:30733","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":62404479,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":null,"maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null}}
{"timestamp":"2025-08-16T17:10:51.960Z","level":"ERROR","message":"Failed to export to PDF","error":"jsPDF is not a constructor"}
{"timestamp":"2025-08-17T01:16:25.834Z","level":"ERROR","message":"❌ Bill total not updated correctly"}
