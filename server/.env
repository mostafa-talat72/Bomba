# Server Configuration
PORT=5000
NODE_ENV=development

# Logging Configuration
# Set to "false" to disable performance logging even in development
ENABLE_PERFORMANCE_LOGGING=false

# Database Configuration
# Primary database (local MongoDB for fast operations)
# Replica Set is now configured and ready!
MONGODB_LOCAL_URI=mongodb://localhost:27017/bomba?replicaSet=rs0

# Backup database (MongoDB Atlas for cloud backup)
MONGODB_ATLAS_URI=mongodb+srv://Saa3d-DB:NrPd3ziWiiZUeumA@cluster0.kqay8.mongodb.net/bomba1?retryWrites=true&w=majority&appName=Cluster0

# Legacy support (keeping for backward compatibility)
# Using Local + Bidirectional Sync for speed and automatic sync
MONGODB_URI=mongodb://localhost:27017/bomba?replicaSet=rs0

# Dual MongoDB Sync Configuration
# Enable/disable automatic synchronization to Atlas
SYNC_ENABLED=true

# Maximum number of operations to queue before warning
SYNC_QUEUE_MAX_SIZE=10000

# Interval between sync operations (milliseconds)
# Lower = faster sync, Higher = less CPU usage
# Recommended: 25-50ms for real-time, 100-200ms for normal, 500-1000ms for background
# Set to 0 for immediate sync (no delay)
SYNC_WORKER_INTERVAL=0

# Maximum retry attempts for failed sync operations
SYNC_MAX_RETRIES=5

# Persist queue to disk when Atlas is unavailable
SYNC_PERSIST_QUEUE=true

# Path for queue persistence file
SYNC_QUEUE_PATH=./data/sync-queue.json

# Collections to exclude from sync (comma-separated)
SYNC_EXCLUDED_COLLECTIONS=

# Batch size for full sync operations
# Lower = more frequent syncs, Higher = less network overhead
SYNC_BATCH_SIZE=1

# Warning threshold for queue size
SYNC_QUEUE_WARNING_THRESHOLD=5000

# Warning threshold for sync lag (milliseconds)
SYNC_LAG_WARNING_THRESHOLD=60000

# Bidirectional Sync Configuration
# Enable/disable bidirectional synchronization (Atlas → Local)
# NOTE: Requires MongoDB Atlas M10+ or Replica Set for Change Streams
# Will enable after Replica Set is configured
BIDIRECTIONAL_SYNC_ENABLED=true

# Change Stream batch size for Atlas monitoring
ATLAS_CHANGE_STREAM_BATCH_SIZE=100

# Collections to exclude from bidirectional sync (comma-separated)
# These collections will maintain one-way sync (Local → Atlas only)
BIDIRECTIONAL_EXCLUDED_COLLECTIONS=sessions,logs

# Conflict resolution strategy (currently only 'last-write-wins' supported)
CONFLICT_RESOLUTION_STRATEGY=last-write-wins

# Origin tracking cleanup interval (milliseconds)
ORIGIN_TRACKING_CLEANUP_INTERVAL=60000

# Change Stream reconnection settings
CHANGE_STREAM_RECONNECT_INTERVAL=5000
CHANGE_STREAM_MAX_RECONNECT_ATTEMPTS=10

# Initial Sync Configuration
# Enable automatic initial sync from Atlas to Local on server start
INITIAL_SYNC_ENABLED=true

# Run initial sync periodically (in milliseconds, 0 = only on startup)
# Example: 30000 = every 30 seconds, 60000 = every 1 minute, 300000 = every 5 minutes
INITIAL_SYNC_INTERVAL=30

# Bidirectional Initial Sync (checks both directions)
# Enable sync from Local to Atlas for missing data
SYNC_LOCAL_TO_ATLAS_ENABLED=true
SYNC_LOCAL_TO_ATLAS_INTERVAL=30

# JWT
JWT_SECRET=your_super_secret_jwt_key_here
JWT_EXPIRE=7d
JWT_REFRESH_SECRET=your_refresh_token_secret_here
JWT_REFRESH_EXPIRE=30d

# Email Configuration (Optional)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=mr.robot192002@gmail.com
EMAIL_PASS=hzbadiidcvogmvhr

# TimeZone
APP_TIMEZONE = Africa/Cairo


# Frontend URL
FRONTEND_URL=http://localhost:3000

# File Upload
MAX_FILE_SIZE=5242880
UPLOAD_PATH=./uploads

# Rate Limiting
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX=100
