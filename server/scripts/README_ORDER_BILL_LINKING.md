# ุฅุตูุงุญ ูุดููุฉ ุฑุจุท ุงูุทูุจุงุช ุจุงูููุงุชูุฑ

## ุงููุดููุฉ

ุชูุฌุฏ ุญุงูุงุช ูู ุงููุธุงู ุญูุซ:
1. **ุทูุจุงุช ููุฌูุฏุฉ** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููู **ุงูุทุงููุฉ ุชุธูุฑ ูุงุฑุบุฉ** ุฑุบู ุฃู ุญุงูุชูุง `occupied` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **ุงูููุงุชูุฑ ูุง ุชุธูุฑ** ูู ุตูุญุฉ ุงูููุงุชูุฑ ุฑุบู ูุฌูุฏ ุทูุจุงุช ูุฑุชุจุทุฉ ุจูุง
3. **ุนุฏู ุชุฒุงูู** ุจูู ุงูุทูุจุงุช ูุงูููุงุชูุฑ ูุงูุทุงููุงุช

## ุงูุณุจุจ

ุงููุดููุฉ ุชุญุฏุซ ุนูุฏูุง:
- ูุชู ุฅูุดุงุก ุทูุจ ููุชู ุฑุจุทู ุจูุงุชูุฑุฉ (order.bill ููุฌูุฏ)
- ููู ุงููุงุชูุฑุฉ ูุง ุชุญุชูู ุนูู ุงูุทูุจ ูู ูุตูููุฉ orders ุงูุฎุงุตุฉ ุจูุง
- ุฃู ูุชู ุฅูุดุงุก ุทูุจ ุจุฏูู ูุงุชูุฑุฉ ุฑุบู ูุฌูุฏ ุทุงููุฉ

## ุงูุญู

ุชู ุฅูุดุงุก scripts ููุญุต ูุฅุตูุงุญ ูุฐู ุงููุดููุฉ:

### 1. ูุญุต ุงูุจูุงูุงุช (ุจุฏูู ุชุนุฏูู)

```bash
node server/scripts/checkOrderBillLinking.js
```

ูุฐุง ุงูู script ูููู ุจู:
- โ ูุญุต ุฌููุน ุงูุทูุจุงุช ุงููุฑุชุจุทุฉ ุจููุงุชูุฑ
- โ ุงูุชุญูู ูู ูุฌูุฏ ุงูุทูุจุงุช ูู ูุตูููุฉ orders ุงูุฎุงุตุฉ ุจุงูููุงุชูุฑ
- โ ุงูุจุญุซ ุนู ุทูุจุงุช ุจุฏูู ูุงุชูุฑุฉ
- โ ูุญุต ุญุงูุงุช ุงูุทุงููุงุช
- โ ุนุฑุถ ุชูุฑูุฑ ููุตู ุจุฌููุน ุงููุดุงูู

**ูุซุงู ุนูู ุงููุชูุฌุฉ:**
```
๐ ุงูููุฎุต ุงูููุงุฆู:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ๏ธ  ุชู ุงูุนุซูุฑ ุนูู 15 ูุดููุฉ ุชุญุชุงุฌ ุฅูู ุฅุตูุงุญ:
   - 8 ุทูุจ ูุฑุชุจุท ุจูุงุชูุฑุฉ ููู ุบูุฑ ููุฌูุฏ ูู ูุตูููุฉ ุงููุงุชูุฑุฉ
   - 3 ุทูุจ ุจุฏูู ูุงุชูุฑุฉ ููู ูุฑุชุจุท ุจุทุงููุฉ
   - 2 ูุงุชูุฑุฉ ุจุฏูู ุทูุจุงุช ุฃู ุฌูุณุงุช
   - 2 ุทุงููุฉ ุจุญุงูุฉ ุบูุฑ ุตุญูุญุฉ
```

### 2. ุฅุตูุงุญ ุงูุจูุงูุงุช

```bash
node server/scripts/fixOrderBillLinking.js
```

ูุฐุง ุงูู script ูููู ุจู:
- ๐ง ุฅุถุงูุฉ ุงูุทูุจุงุช ุฅูู ูุตูููุฉ orders ูู ุงูููุงุชูุฑ ุงููุฑุชุจุทุฉ ุจูุง
- ๐ง ุฅูุดุงุก ููุงุชูุฑ ุฌุฏูุฏุฉ ููุทูุจุงุช ุงูุชู ุจุฏูู ูุงุชูุฑุฉ
- ๐ง ุฑุจุท ุงูุทูุจุงุช ุจุงูููุงุชูุฑ ุงูููุฌูุฏุฉ ุฅุฐุง ูุงูุช ูุชุงุญุฉ
- ๐ง ุชุญุฏูุซ ุญุงูุงุช ุงูุทุงููุงุช ุจูุงุกู ุนูู ูุฌูุฏ ููุงุชูุฑ ุบูุฑ ูุฏููุนุฉ
- ๐ง ุฅุนุงุฏุฉ ุญุณุงุจ ุฅุฌูุงููุงุช ุงูููุงุชูุฑ

**ูุซุงู ุนูู ุงููุชูุฌุฉ:**
```
๐ ุงููุชุงุฆุฌ:
โ ุทูุจุงุช ุชู ุฅุตูุงุญูุง: 8
โ  ุทูุจุงุช ูุฑุชุจุทุฉ ุจุดูู ุตุญูุญ: 45
โ๏ธ  ุทูุจุงุช ุจููุงุชูุฑ ููููุฏุฉ: 0

๐ ุงููุชุงุฆุฌ:
โ ููุงุชูุฑ ุฌุฏูุฏุฉ ุชู ุฅูุดุงุคูุง: 2
๐ ุทูุจุงุช ุชู ุฑุจุทูุง ุจููุงุชูุฑ ููุฌูุฏุฉ: 1

โ ุชู ุชุญุฏูุซ 2 ุทุงููุฉ
```

## ุฎุทูุงุช ุงูุฅุตูุงุญ ุงูููุตู ุจูุง

### ุงูุฎุทูุฉ 1: ุงููุญุต
```bash
# ุงูุญุต ุงูุจูุงูุงุช ุฃููุงู ููุนุฑูุฉ ุญุฌู ุงููุดููุฉ
node server/scripts/checkOrderBillLinking.js
```

### ุงูุฎุทูุฉ 2: ุงููุณุฎ ุงูุงุญุชูุงุทู (ุงุฎุชูุงุฑู ููู ููุตู ุจู)
```bash
# ูู ุจุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจู ุงูุฅุตูุงุญ
mongodump --uri="mongodb://localhost:27017/your_database" --out=./backup
```

### ุงูุฎุทูุฉ 3: ุงูุฅุตูุงุญ
```bash
# ูู ุจุฅุตูุงุญ ุงููุดุงูู
node server/scripts/fixOrderBillLinking.js
```

### ุงูุฎุทูุฉ 4: ุงูุชุญูู
```bash
# ุชุญูู ูู ุฃู ุฌููุน ุงููุดุงูู ุชู ุฅุตูุงุญูุง
node server/scripts/checkOrderBillLinking.js
```

## ูุง ุงูุฐู ูุชู ุฅุตูุงุญูุ

### 1. ุงูุทูุจุงุช ุงููุฑุชุจุทุฉ ุจููุงุชูุฑ
- โ ุฅุถุงูุฉ ุงูุทูุจ ุฅูู ูุตูููุฉ `bill.orders` ุฅุฐุง ูุงู ููููุฏุงู
- โ ุฅุนุงุฏุฉ ุญุณุงุจ ุฅุฌูุงููุงุช ุงููุงุชูุฑุฉ

### 2. ุงูุทูุจุงุช ุจุฏูู ูุงุชูุฑุฉ
- โ ุงูุจุญุซ ุนู ูุงุชูุฑุฉ ุบูุฑ ูุฏููุนุฉ ููุทุงููุฉ
- โ ุฅุฐุง ูุฌุฏุช: ุฑุจุท ุงูุทูุจ ุจุงููุงุชูุฑุฉ ุงูููุฌูุฏุฉ
- โ ุฅุฐุง ูู ุชูุฌุฏ: ุฅูุดุงุก ูุงุชูุฑุฉ ุฌุฏูุฏุฉ ููุทูุจ

### 3. ุญุงูุงุช ุงูุทุงููุงุช
- โ ุชุญุฏูุซ ุญุงูุฉ ุงูุทุงููุฉ ุฅูู `occupied` ุฅุฐุง ูุงู ูุฏููุง ููุงุชูุฑ ุบูุฑ ูุฏููุนุฉ
- โ ุชุญุฏูุซ ุญุงูุฉ ุงูุทุงููุฉ ุฅูู `empty` ุฅุฐุง ูู ููู ูุฏููุง ููุงุชูุฑ ุบูุฑ ูุฏููุนุฉ

## ุงูููุงูุฉ ูู ุงููุดููุฉ ูู ุงููุณุชูุจู

ุชู ุชุญุฏูุซ ุงูููุฏ ูู `server/controllers/orderController.js` ูุถูุงู:
1. โ ูู ุทูุจ ูุชู ุฅูุดุงุคู ูุชู ุฑุจุทู ุจูุงุชูุฑุฉ ุชููุงุฆูุงู
2. โ ุงููุงุชูุฑุฉ ุชุญุชูู ุนูู ุงูุทูุจ ูู ูุตูููุฉ orders
3. โ ุญุงูุฉ ุงูุทุงููุฉ ูุชู ุชุญุฏูุซูุง ุชููุงุฆูุงู
4. โ ุงุณุชุฎุฏุงู transactions ูุถูุงู atomicity

## ููุงุญุธุงุช ูููุฉ

โ๏ธ **ุชุญุฐูุฑ:** 
- ูู ุจุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจู ุชุดุบูู script ุงูุฅุตูุงุญ
- ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ูุณุชุฎุฏููู ูุนูููู ุนูู ุงููุธุงู ุฃุซูุงุก ุงูุฅุตูุงุญ
- ูููู ุชุดุบูู script ุงููุญุต ูู ุฃู ููุช ุจุฏูู ูุฎุงุทุฑ

โ **ุขูู:**
- script ุงููุญุต ูุง ูุนุฏู ุฃู ุจูุงูุงุช
- script ุงูุฅุตูุงุญ ูููู ููุท ุจุฅุถุงูุฉ ุฑูุงุจุท ูุชุญุฏูุซ ุญุงูุงุช
- ูุง ูุชู ุญุฐู ุฃู ุจูุงูุงุช

## ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู ููู `.env` ูุฃู `MONGODB_URI` ุตุญูุญ
2. ุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุงุญุฉ
3. ุฑุงุฌุน ุฑุณุงุฆู ุงูุฎุทุฃ ูู console
4. ุงุชุตู ุจูุฑูู ุงูุฏุนู ุงูููู

## ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

ุชู ุชุทุจูู ุงูุฅุตูุงุญุงุช ุงูุชุงููุฉ ูู ุงูููุฏ:
- โ ุชุญุณูู ููุทู ุฅูุดุงุก ุงูุทูุจุงุช
- โ ุฅุถุงูุฉ ุงูุชุญูู ูู ูุฌูุฏ ุงููุงุชูุฑุฉ ูุจู ุญูุธ ุงูุทูุจ
- โ ุชุญุฏูุซ ุญุงูุฉ ุงูุทุงููุฉ ุชููุงุฆูุงู
- โ ุฅุฑุณุงู ุฃุญุฏุงุซ Socket.IO ููุชุญุฏูุซุงุช ุงูููุฑูุฉ
- โ ุงุณุชุฎุฏุงู transactions ูุถูุงู ุชูุงุณู ุงูุจูุงูุงุช
