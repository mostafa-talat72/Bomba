# تعليمات الاختبار

## المشكلة الحالية:
النظام تم تعديله بالكامل ليستخدم ObjectId references، لكن يبدو إن في مشكلة في الـ refresh.

## البيانات الحالية:
✅ Tables: موجودة وفيها `number` field
✅ Orders الجديدة: فيها `table` ObjectId صح
✅ Bills الجديدة: المفروض فيها `table` ObjectId

## خطوات الاختبار:

### 1. اختبار إضافة طلب جديد:
```
1. افتح صفحة الكافيه
2. اختر طاولة رقم 1
3. أضف منتج
4. احفظ الطلب
5. شوف لو الطاولة اتغيرت للون الأحمر
```

**المتوقع**:
- الطاولة تتغير للون الأحمر فوراً
- الطلب يُطبع مباشرة
- الطلب يظهر في قائمة طلبات الطاولة

### 2. اختبار صفحة الفواتير:
```
1. اذهب لصفحة الفواتير
2. اضغط على قسم "الطاولات"
3. شوف لو الطاولة رقم 1 محجوزة (حمراء)
4. اضغط على الطاولة
5. شوف لو الفاتورة ظاهرة
```

**المتوقع**:
- الطاولة تظهر محجوزة (حمراء)
- الفاتورة تظهر تحت الطاولة
- الفاتورة فيها الطلب اللي اتضاف

### 3. اختبار الدفع:
```
1. من صفحة الفواتير
2. افتح الفاتورة
3. ادفع المبلغ بالكامل
4. ارجع لصفحة الكافيه
5. شوف لو الطاولة رجعت خضراء
```

**المتوقع**:
- الطاولة ترجع خضراء (فارغة)
- الطلبات تتشال من قائمة الطاولة

## إذا لم يعمل:

### افحص Console في المتصفح:
```
F12 → Console
شوف لو في errors
```

### افحص Network:
```
F12 → Network
شوف الـ requests اللي بتتبعت
شوف الـ responses
```

### افحص البيانات في Database:
```bash
node server/scripts/checkTableFields.js
```

## الحل المؤقت:

إذا المشكلة مستمرة، جرب:
1. امسح الـ cache: Ctrl+Shift+Delete
2. اعمل hard refresh: Ctrl+F5
3. اعمل restart للـ server

## ملاحظات:

- الـ Orders الجديدة بتتحفظ صح (فيها table ObjectId)
- المشكلة ممكن تكون في الـ frontend refresh
- أو في الـ populate من الـ backend
