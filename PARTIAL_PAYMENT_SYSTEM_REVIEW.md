# ูุฑุงุฌุนุฉ ูุธุงู ุงูุฏูุน ุงูุฌุฒุฆู - ุงูุชูููู ุงูุดุงูู

## โ ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ ุจูุฌุงุญ

### 1. ุฅุตูุงุญ ุงูุฎุงุฏู (Server-Side)
- **ุฏุงูุฉ `addPartialPayment` ูุญุฏุซุฉ**: ุชุญูุธ ุงูุขู ูู ููุง ุงููุธุงููู
  - `partialPayments` (ุงููุธุงู ุงููุฏูู ููุชูุงูู)
  - `itemPayments` (ุงููุธุงู ุงูุฌุฏูุฏ ุงูุฐู ูุชููุนู ุงููุงุฌูุฉ)
- **ุญูุธ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ**: `paidQuantity` ู `paidAmount` ูุชู ุญูุธููุง ุจุงูููู ุงูุตุญูุญุฉ
- **Socket.IO event**: ุฅุถุงูุฉ `partial-payment-received` ููุชุญุฏูุซ ุงูููุฑู
- **ูุนุงูุฌุฉ ุงููููุงุช ุงูุฌุฒุฆูุฉ**: ูุชุนุงูู ูุน ุงูุฏูุน ุงูุฌุฒุฆู ููุฃุตูุงู ุจุฏูุฉ

### 2. ููุทู ุงูุชุฌููุน (Frontend Aggregation)
- **ุฏุงูุฉ `aggregateItemsWithPayments`**: ุชุนูู ุจุดูู ุตุญูุญ ูุน ุงููุธุงู ุงูุฌุฏูุฏ
- **ููุทู ุฐูู ููุงุญุชูุงุท**: ูุณุชุฎุฏู ูุณุจุฉ ุงููุงุชูุฑุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุจูุงูุงุช `itemPayments`
- **ุชูุธูู ุงูููุฏ**: ุฅุฒุงูุฉ console.log statements

### 3. ุงูุชุญุฏูุซ ุงูููุฑู (Real-time Updates)
- **Socket.IO listeners**: ูุถุงูุฉ ูู `Billing.tsx` ู `BillView.tsx`
- **ุชุญุฏูุซ ุชููุงุฆู**: ููุฃุฑูุงู ูู ุฌููุน ุงููุงุฌูุงุช:
  - PartialPaymentModal
  - Billing page item details
  - BillView page
  - Print bill page

## ๐ง ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### ุฅุตูุงุญ ุงููุดููุฉ ุงูุฃุณุงุณูุฉ
**ุงููุดููุฉ**: ุงูุฎุงุฏู ูุงู ูุญูุธ `paidQuantity: 0` ู `paidAmount: 0` ูู `itemPayments`
**ุงูุญู**: ุชุญุฏูุซ ุฏุงูุฉ `addPartialPayment` ูุญูุธ ุงูุจูุงูุงุช ูู ุงููุธุงู ุงูุฌุฏูุฏ

```javascript
// ูุจู ุงูุฅุตูุงุญ โ
this.partialPayments.push({...}); // ููุท ุงููุธุงู ุงููุฏูู

// ุจุนุฏ ุงูุฅุตูุงุญ โ
this.partialPayments.push({...}); // ุงููุธุงู ุงููุฏูู (ููุชูุงูู)
this.itemPayments.push({
  paidQuantity: item.quantity,     // โ ุงููููุฉ ุงูุตุญูุญุฉ
  paidAmount: item.price * item.quantity, // โ ุงููุจูุบ ุงูุตุญูุญ
  // ... ุจุงูู ุงูุญููู
}); // ุงููุธุงู ุงูุฌุฏูุฏ
```

## ๐ฏ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### 1. ุชุญุฏูุซ ููุฑู ููุฃุฑูุงู
- ุงููููุงุช ุงููุฏููุนุฉ ุชุธูุฑ ุจุดูู ุตุญูุญ
- ุงููููุงุช ุงููุชุจููุฉ ุชูุญุณุจ ุจุฏูุฉ
- ุงูุชุญุฏูุซ ูุญุฏุซ ูู ุฌููุน ุงููุงุฌูุงุช ุงูููุชูุญุฉ

### 2. ุนุฏู ูุฌูุฏ ููู ุตูุฑูุฉ
- `paidQuantity` ูุญุชูู ุนูู ุงููููุฉ ุงููุนููุฉ ุงููุฏููุนุฉ
- `paidAmount` ูุญุชูู ุนูู ุงููุจูุบ ุงููุนูู ุงููุฏููุน

### 3. ุชุญุฏูุซ ุญุงูุฉ ุงููุงุชูุฑุฉ
- ุงููุงุชูุฑุฉ ุชูุชูู ูู `draft` ุฅูู `partial` ุฅูู `paid` ุจุดูู ุตุญูุญ
- ุญุงูุฉ ุงูุทุงููุฉ ุชูุญุฏุซ ุชููุงุฆูุงู

## ๐ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ ุงููุทููุจุฉ

### 1. ุงุฎุชุจุงุฑ ุงูุฏูุน ุงูุฌุฒุฆู
1. ุฅูุดุงุก ูุงุชูุฑุฉ ุฌุฏูุฏุฉ ูุน ุนุฏุฉ ุฃุตูุงู
2. ูุชุญ ูุงูุฐุฉ ุงูุฏูุน ุงูุฌุฒุฆู
3. ุฏูุน ูููุฉ ุฌุฒุฆูุฉ ูู ุตูู ูุงุญุฏ
4. ุงูุชุญูู ูู ุชุญุฏูุซ ุงูุฃุฑูุงู ููุฑุงู ูู ุฌููุน ุงููุงุฌูุงุช

### 2. ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซ ุงูููุฑู
1. ูุชุญ ุงููุงุชูุฑุฉ ูู ุนุฏุฉ ููุงูุฐ/ุชุจููุจุงุช
2. ุฅุฌุฑุงุก ุฏูุน ุฌุฒุฆู ูู ุฅุญุฏู ุงูููุงูุฐ
3. ุงูุชุญูู ูู ุชุญุฏูุซ ุงูุฃุฑูุงู ูู ุฌููุน ุงูููุงูุฐ

### 3. ุงุฎุชุจุงุฑ ุงูุญุงูุงุช ุงูุญุฏูุฉ
1. ุฏูุน ูููุฉ ุฃูุจุฑ ูู ุงููุชุจูู (ูุฌุจ ุฃู ููุฑูุถ)
2. ุฏูุน ุตูู ูุฏููุน ุจุงููุงูู (ูุฌุจ ุฃู ููุฑูุถ)
3. ุฏูุน ุฌููุน ุงูุฃุตูุงู (ุงููุงุชูุฑุฉ ุชุตุจุญ `paid`)

## ๐จ ููุงุท ูููุฉ ูููุทูุฑูู

### 1. ุงุณุชุฎุฏุงู ุงููุธุงู ุงูุตุญูุญ
- ุงุณุชุฎุฏู `itemPayments` ูููุณ `partialPayments` ูู ุงููุงุฌูุฉ
- ุงููุธุงู ุงููุฏูู `partialPayments` ูุญููุธ ููุชูุงูู ููุท

### 2. Socket.IO Events
- ุชุฃูุฏ ูู ุฃู ุงูุฎุงุฏู ูุฑุณู `partial-payment-received` ุนูุฏ ุงูุฏูุน ุงูุฌุฒุฆู
- ุงููุงุฌูุฉ ุชุณุชูุน ููุฐุง ุงูุญุฏุซ ูุชุญุฏุซ ุงูุจูุงูุงุช ููุฑุงู

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุฌููุน ุงูุฃุฎุทุงุก ูุนุงูุฌุฉ ุจุดูู ุตุญูุญ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ

## ๐ ููุฎุต ุงูุญุงูุฉ

| ุงูุฌุงูุจ | ูุจู ุงูุฅุตูุงุญ โ | ุจุนุฏ ุงูุฅุตูุงุญ โ |
|---------|------------------|------------------|
| **ุญูุธ ุงูุจูุงูุงุช** | `paidQuantity: 0` | `paidQuantity: actual_value` |
| **ุงูุชุญุฏูุซ ุงูููุฑู** | ูุง ูุนูู | ูุนูู ูู ุฌููุน ุงููุงุฌูุงุช |
| **ุญุณุงุจ ุงููููุงุช** | ุฎุงุทุฆ | ุตุญูุญ ูุฏููู |
| **ุญุงูุฉ ุงููุงุชูุฑุฉ** | ูุง ุชุชุญุฏุซ | ุชุชุญุฏุซ ุชููุงุฆูุงู |
| **Socket.IO** | ุบูุฑ ููุฌูุฏ | `partial-payment-received` |

## โ ุงูุฎูุงุตุฉ

ูุธุงู ุงูุฏูุน ุงูุฌุฒุฆู ุฃุตุจุญ ูุนูู ุจุดูู ุตุญูุญ ููุชูุงูู. ุงููุดููุฉ ุงูุฃุณุงุณูุฉ (ุญูุธ ููู ุตูุฑูุฉ) ุชู ุญููุงุ ูุงูุชุญุฏูุซ ุงูููุฑู ูุนูู ูู ุฌููุน ุงููุงุฌูุงุช. ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูุฅูุชุงุฌู.