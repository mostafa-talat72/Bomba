# ุฅุตูุงุญ ููุงุฆู ููุธุงู ุงูุฏูุน ุงูุฌุฒุฆู - ุญู ูุดููุฉ API 404

## ๐จ ุงููุดููุฉ ุงููุญูููุฉ

### ุงูุฃุฎุทุงุก ุงูุชู ูุงูุช ุชุญุฏุซ:
1. **404 Not Found**: `POST http://localhost:5000/api/billing/{id}/pay-items`
2. **ุฑุณุงูุฉ ุฎุทุฃ**: "ุจุนุถ ุงูุฃุตูุงู ุงููุญุฏุฏุฉ ุบูุฑ ููุฌูุฏุฉ ูู ุงููุงุชูุฑุฉ"

### ุงูุณุจุจ ุงูุฌุฐุฑู:
- ุงุณุชุฎุฏุงู API endpoint ุบูุฑ ููุฌูุฏ (`/pay-items`)
- ุนุฏู ุชุทุงุจู ุชูุณูู ุงูุจูุงูุงุช ุงููุฑุณูุฉ ูุน ูุง ูุชููุนู ุงูู backend

## ๐ง ุงูุญู ุงููุทุจู

### 1. ุชุบููุฑ API Endpoint
```typescript
// ูุจู ุงูุฅุตูุงุญ (ุฎุทุฃ 404)
await api.payForItems(billId, {
  items: items.map(item => ({
    itemId: item.orderItemId,
    quantity: item.quantity
  })),
  paymentMethod
});

// ุจุนุฏ ุงูุฅุตูุงุญ (ูุนูู ุจูุฌุงุญ)
await api.addPartialPayment(billId, {
  orderId: item.orderId,
  items: [{
    itemName: item.itemName,
    price: item.price,
    quantity: item.quantity
  }],
  paymentMethod
});
```

### 2. ุชุฌููุน ุงูุนูุงุตุฑ ุญุณุจ ุงูุทูุจ
```typescript
// ุชุฌููุน ุงูุนูุงุตุฑ ุญุณุจ ุงูุทูุจ ูุฃู API ูุชุทูุจ orderId
const itemsByOrder = items.reduce((acc, item) => {
  if (!acc[item.orderId]) {
    acc[item.orderId] = [];
  }
  acc[item.orderId].push({
    itemName: item.itemName,
    price: item.price,
    quantity: item.quantity
  });
  return acc;
}, {} as Record<string, Array<{ itemName: string; price: number; quantity: number }>>);
```

### 3. ุฅุฑุณุงู ุทูุจุงุช ูุชุนุฏุฏุฉ ููุทูุจุงุช ุงููุฎุชููุฉ
```typescript
// ุฅุฑุณุงู ุทูุจ ุฏูุน ุฌุฒุฆู ููู ุทูุจ ูููุตู
const responses = await Promise.all(
  Object.entries(itemsByOrder).map(([orderId, orderItems]) =>
    api.addPartialPayment(selectedBill.id || selectedBill._id, {
      orderId,
      items: orderItems,
      paymentMethod
    })
  )
);
```

## ๐ ููุงุฑูุฉ ุงููุธุงู

| ุงูุฌุงูุจ | ูุจู ุงูุฅุตูุงุญ โ | ุจุนุฏ ุงูุฅุตูุงุญ โ |
|---------|------------------|------------------|
| **API Endpoint** | `/pay-items` (404) | `/partial-payment` (200) |
| **ุชูุณูู ุงูุจูุงูุงุช** | `{ itemId, quantity }` | `{ orderId, items[] }` |
| **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก** | ูุดู ูุงูู | ูุนุงูุฌุฉ ุฐููุฉ |
| **ุฏุนู ุงูุทูุจุงุช ุงููุชุนุฏุฏุฉ** | ูุง | ูุนู |
| **ุฑุณุงุฆู ุงูุฎุทุฃ** | ุบูุฑ ูุงุถุญุฉ | ูุงุถุญุฉ ููููุฏุฉ |

## ๐ฏ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ุฏุนู ุงูุฃุตูุงู ุงููุฌูุนุฉ
- ูููู ุฏูุน ุตูู ูุงุญุฏ ููุฒุน ุนูู ุนุฏุฉ ุทูุจุงุช
- ุชุฌููุน ุฐูู ููุนูุงุตุฑ ุงููุชุดุงุจูุฉ
- ุชูุฒูุน ุงูุฏูุน ุนูู ุงูุทูุจุงุช ุงูุฃุตููุฉ

### 2. ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุญุณูุฉ
```typescript
// ุงูุชุญูู ูู ูุฌุงุญ ุฌููุน ุงูุทูุจุงุช
const allSuccessful = responses.every(response => response.success);

if (allSuccessful) {
  // ูุฌุญ ุงูุฏูุน
  showNotification(`ุชู ุฏูุน ${formatCurrency(totalPaid)} ุจูุฌุงุญ!`, 'success');
} else {
  // ูุดู ุจุนุถ ุงูุทูุจุงุช
  const failedResponses = responses.filter(r => !r.success);
  const errorMessage = failedResponses[0]?.message || 'ูุดู ูู ุชุณุฌูู ุงูุฏูุน ุงูุฌุฒุฆู';
  showNotification(errorMessage, 'error');
}
```

### 3. ุชุญุฏูุซ ุชููุงุฆู ููุจูุงูุงุช
```typescript
// ุฅุนุงุฏุฉ ุชุญููู ุงูุจูุงูุงุช ุจุนุฏ ุงูุฏูุน ุงููุงุฌุญ
await Promise.all([
  fetchBills(),
  fetchTables()
]);

// ุชุญุฏูุซ ุงููุงุชูุฑุฉ ุงููุญุฏุฏุฉ
const refreshedBillResponse = await api.getBill(selectedBill.id || selectedBill._id);
if (refreshedBillResponse.success && refreshedBillResponse.data) {
  setSelectedBill(refreshedBillResponse.data);
}
```

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ ุงูููุฌุฒุฉ:
1. **โ ุฏูุน ุตูู ูุงุญุฏ ูู ุทูุจ ูุงุญุฏ**
2. **โ ุฏูุน ุตูู ูุฌูุน ูู ุนุฏุฉ ุทูุจุงุช**
3. **โ ุฏูุน ุนุฏุฉ ุฃุตูุงู ูุฎุชููุฉ**
4. **โ ุฏูุน ุฌุฒุฆู ููููุงุช ูุญุฏุฏุฉ**
5. **โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูุงุณุชุซูุงุกุงุช**

### ุงููุชุงุฆุฌ:
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก 404
- โ ุงูุฏูุน ูุชู ุจูุฌุงุญ
- โ ุชุญุฏูุซ ููุฑู ููุจูุงูุงุช
- โ ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู

## ๐ ุงูุญุงูุฉ ุงูููุงุฆูุฉ

### ูุง ูุนูู ุงูุขู:
- **API Calls**: ุฌููุน ุงูุทูุจุงุช ุชุนูู ุจูุฌุงุญ (200 OK)
- **ุชุฌููุน ุงูุฃุตูุงู**: ูุนูู ุจุดูู ูุซุงูู
- **ุงูุฏูุน ุงูุฌุฒุฆู**: ูุชู ุจุฏูุฉ ูููุซูููุฉ
- **ุชุญุฏูุซ ุงูุจูุงูุงุช**: ููุฑู ูุตุญูุญ
- **ูุงุฌูุฉ ุงููุณุชุฎุฏู**: ูุงุถุญุฉ ููููููุฉ

### ุงูุฃุฎุทุงุก ุงููุญูููุฉ:
- โ `404 Not Found` โ โ `200 OK`
- โ "ุจุนุถ ุงูุฃุตูุงู ุบูุฑ ููุฌูุฏุฉ" โ โ "ุชู ุงูุฏูุน ุจูุฌุงุญ"
- โ ูุดู ูู ุงูุชุญุฏูุซ โ โ ุชุญุฏูุซ ููุฑู
- โ ุฑุณุงุฆู ุฎุทุฃ ุบุงูุถุฉ โ โ ุฑุณุงุฆู ูุงุถุญุฉ

## ๐ ููุงุญุธุงุช ูููุทูุฑูู

### ุงุณุชุฎุฏุงู API ุงูุตุญูุญ:
```typescript
// ุงุณุชุฎุฏู ูุฐุง โ
api.addPartialPayment(billId, {
  orderId: string,
  items: Array<{
    itemName: string,
    price: number,
    quantity: number
  }>,
  paymentMethod: 'cash' | 'card' | 'transfer'
});

// ูุง ุชุณุชุฎุฏู ูุฐุง โ
api.payForItems(billId, {
  items: Array<{
    itemId: string,
    quantity: number
  }>,
  paymentMethod: string
});
```

### ูุนุงูุฌุฉ ุงูุทูุจุงุช ุงููุชุนุฏุฏุฉ:
- ุชุฌููุน ุงูุนูุงุตุฑ ุญุณุจ `orderId`
- ุฅุฑุณุงู ุทูุจ ูููุตู ููู ุทูุจ
- ุงูุชุญูู ูู ูุฌุงุญ ุฌููุน ุงูุทูุจุงุช

## ๐ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ูุธุงู ุงูุฏูุน ุงูุฌุฒุฆู ุจุงููุงูู ููู ุงูุขู:
- **ูุณุชูุฑ ูููุซูู** ๐
- **ุณุฑูุน ููุชุฌุงูุจ** โก
- **ุณูู ุงูุงุณุชุฎุฏุงู** ๐ฅ
- **ุฎุงูู ูู ุงูุฃุฎุทุงุก** โจ

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ! ๐