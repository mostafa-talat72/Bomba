# ุชุนูููุงุช ุฅุตูุงุญ ุชูููุฉ ุงูุฌูุณุงุช

## ุงููุดููุฉ
ุงูุฌูุณุงุช ุงูุชู ุชู ุฅููุงุคูุง ูุจู ุชุทุจูู ุงูุฅุตูุงุญ ูุง ุชุฒุงู ูุญููุธุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจููู ุฎุงุทุฆุฉ (`totalCost = 0`, `finalCost = 0`).

## ุงูุญู

### ุงูุฎุทูุฉ 1: ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ
ูุฌุจ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ ูุชุทุจูู ุงูุชุบููุฑุงุช ุงูุฌุฏูุฏุฉ:

```bash
# ุฅููุงู ุงูุณูุฑูุฑ ุงูุญุงูู (Ctrl+C)
# ุซู ุฅุนุงุฏุฉ ุชุดุบููู:
cd server
npm run dev
```

ุฃู ุฅุฐุง ููุช ุชุณุชุฎุฏู PM2:
```bash
pm2 restart all
```

### ุงูุฎุทูุฉ 2: ุฅุตูุงุญ ุงูุฌูุณุงุช ุงููุฏููุฉ
ูุฅุตูุงุญ ุงูุฌูุณุงุช ุงูููุฌูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```bash
cd server
node scripts/fixSessionCosts.js
```

ูุฐุง ุงูุณูุฑูุจุช ุณูููู ุจู:
1. ุงูุจุญุซ ุนู ุฌููุน ุงูุฌูุณุงุช ุงูููุชููุฉ ุงูุชู ููุง `totalCost = 0` ุฃู `finalCost = 0`
2. ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุชูููุฉ ููู ุฌูุณุฉ ุจูุงุกู ุนูู:
   - ูุฏุฉ ุงูุฌูุณุฉ
   - ุนุฏุฏ ุงูุฏุฑุงุนุงุช (ููุจูุงูุณุชูุดู)
   - ุงูุฃุณุนุงุฑ ุงููุญููุธุฉ ูู ุจูุงูุงุช ุงูุฌูุงุฒ
3. ุญูุธ ุงูููู ุงูุตุญูุญุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฎุทูุฉ 3: ุงูุชุญูู ูู ุงููุชุงุฆุฌ
ุจุนุฏ ุชุดุบูู ุงูุณูุฑูุจุชุ ุณุชุธูุฑ ุฑุณุงูุฉ ููุฎุตุฉ:
```
==================================================
๐ Summary:
   โ Fixed: 15
   โ๏ธ  Skipped: 2
   โ Errors: 0
==================================================
```

### ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ
ุงูุขู ููููู ุทุจุงุนุฉ ุฃู ูุงุชูุฑุฉ ูุฏููุฉ ูุณุชุธูุฑ ุงูุชูููุฉ ุงูุตุญูุญุฉ!

## ููุงุญุธุงุช ูููุฉ

### ุงูุฌูุณุงุช ุงูุฌุฏูุฏุฉ
- ุฃู ุฌูุณุฉ ูุชู ุฅููุงุคูุง **ุจุนุฏ** ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ ุณุชุญุณุจ ุชูููุชูุง ุจุดูู ุตุญูุญ ุชููุงุฆูุงู
- ูุง ุญุงุฌุฉ ูุชุดุบูู ุงูุณูุฑูุจุช ูุฑุฉ ุฃุฎุฑู

### ุงูุฌูุณุงุช ุงูุชู ุณูุชู ุชุฎุทููุง
ุงูุณูุฑูุจุช ุณูุชุฎุทู ุงูุฌูุณุงุช ุงูุชู:
- ูุง ุชุญุชูู ุนูู ููุช ุงูุชูุงุก (`endTime`)
- ูุง ุชุญุชูู ุนูู ูุฑุฌุน ููุฌูุงุฒ (`deviceId`)
- ูุญุฐููุฉ ุฃู ุชุงููุฉ

### ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุจุช
ููููู ุชุดุบูู ุงูุณูุฑูุจุช ุนุฏุฉ ูุฑุงุช ุจุฃูุงู - ุณูุนูุฏ ุญุณุงุจ ุงูุชูููุฉ ููุท ููุฌูุณุงุช ุงูุชู ููุง ููู ุฎุงุทุฆุฉ.

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "Cannot connect to MongoDB"
ุชุฃูุฏ ูู:
- ููู `.env` ููุฌูุฏ ูู ูุฌูุฏ `server`
- `MONGODB_URI` ุตุญูุญ ูู ููู `.env`
- ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุนูู

### ุฎุทุฃ: "Device not found"
ุจุนุถ ุงูุฌูุณุงุช ูุฏ ุชููู ูุฑุชุจุทุฉ ุจุฃุฌูุฒุฉ ูุญุฐููุฉ. ุงูุณูุฑูุจุช ุณูุชุฎุทู ูุฐู ุงูุฌูุณุงุช ุชููุงุฆูุงู.

### ุงูุฌูุณุงุช ูุง ุชุฒุงู ุจุตูุฑ
ุชุฃูุฏ ูู:
1. โ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ
2. โ ุชุดุบูู ุงูุณูุฑูุจุช ุจูุฌุงุญ
3. โ ุชุญุฏูุซ ุงูุตูุญุฉ ูู ุงููุชุตูุญ (F5)
4. โ ุฅุนุงุฏุฉ ูุชุญ ุงููุงุชูุฑุฉ ูู ูุงุฆูุฉ ุงูููุงุชูุฑ

## ูุซุงู ุนูู ุงูุฅุฎุฑุงุฌ

```bash
$ node scripts/fixSessionCosts.js

โ Connected to MongoDB

๐ Found 15 sessions with zero/invalid costs

๐ง Processing session: 674abc123def456789012345
   Device: ุจูุงูุณุชูุดู 1
   Start: 2025-01-19T22:30:00.000Z
   End: 2025-01-19T23:54:00.000Z
   Current totalCost: 0
   Current finalCost: 0
   โ Recalculated totalCost: 28
   โ Recalculated finalCost: 28
   ๐พ Saved successfully

๐ง Processing session: 674abc123def456789012346
   Device: ุจูุงูุณุชูุดู 2
   Start: 2025-01-19T20:00:00.000Z
   End: 2025-01-19T22:30:00.000Z
   Current totalCost: 0
   Current finalCost: 0
   โ Recalculated totalCost: 50
   โ Recalculated finalCost: 45
   ๐พ Saved successfully

==================================================
๐ Summary:
   โ Fixed: 15
   โ๏ธ  Skipped: 0
   โ Errors: 0
==================================================

โ Disconnected from MongoDB
```

## ุงูุฎูุงุตุฉ

1. โ ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ
2. โ ุดุบู ุงูุณูุฑูุจุช: `node scripts/fixSessionCosts.js`
3. โ ุญุฏุซ ุงูุตูุญุฉ ูู ุงููุชุตูุญ
4. โ ุงุทุจุน ุงููุงุชูุฑุฉ - ุณุชุธูุฑ ุงูุชูููุฉ ุงูุตุญูุญุฉ!

ุงูุขู ุฌููุน ุงูุฌูุณุงุช (ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ) ุณุชุนุฑุถ ุงูุชูููุฉ ุงูุตุญูุญุฉ! ๐
